!function(){"use strict";class t{constructor(t){this.t=0,this.h=0,this.i={},this.seed=t,this.seed.length<8&&(this.seed="padding_"+this.seed),this.seed.length%2==0&&(this.seed="1"+this.seed),this.o=[2972948403,3086140710,2071788248,3026137486,1411764137,2265725585,2923087685,1593177610],this.state=3234042090;for(var h=this.seed.length-1;h>=0;h--){var s=this.seed.charCodeAt(h);this.state=((this.state<<5)+this.state^s^this.state<<s%13+1^this.state>>s%17+1)>>>0,this.o[h%8]^=((this.state>>9)*(this.state%16384+3427)^s)>>>0}}M(){var t=this.seed.charCodeAt(this.t),h=this.o[this.h];return this.state=((this.state<<5)+this.state+h^t^this.state<<t%17+1^this.state>>t%13+1)>>>0,this.o[this.h]=(h>>3^h<<t%19+1^this.state%134217728*3427)>>>0,this.t=(this.t+1)%this.seed.length,this.h=(this.h+1)%8,this.state}u(t){const h=[1160605769,1424711319,876532818,1419174464];let s=1206170165;if(null==t&&(t="?/?/?/",s=3379896793),this.i.hasOwnProperty(t))return this.i[t];for(var i=t.length-1;i>=0;i--){const n=t.charCodeAt(i);let e=h[0]^n;e=(e^e<<11)>>>0,e=(e^e>>8)>>>0,h[0]=h[1],h[1]=h[2],h[2]=h[3],h[3]=(h[3]^h[3]>>19^e)>>>0,s=3427*(s^n<<24)^h[3]}for(var n=this.seed.length-1;n>=0;n--){const t=this.seed.charCodeAt(n);let i=h[0]^t;i=(i^i<<11)>>>0,i=(i^i>>8)>>>0,h[0]=h[1],h[1]=h[2],h[2]=h[3],h[3]=(h[3]^h[3]>>19^i)>>>0,s=3427*(s^t<<24)^h[3]}return this.i[t]=s>>>0,this.i[t]}l(t,h){return(4294967296*this.M()+this.M())/0x10000000000000000*(h-t)+t}m(t,h,s){return(4294967296*this.u(s)+this.u(s+"@"))/0x10000000000000000*(h-t)+t}v(t,h){return Math.floor((4294967296*this.M()+this.M())/0x10000000000000000*(h+1-t)+t)}p(t,h,s){return Math.floor((4294967296*this.u(s)+this.u(s+"@"))/0x10000000000000000*(h+1-t)+t)}g(t){return(4294967296*this.M()+this.M())/0x10000000000000000<t}k(t,h){return(4294967296*this.u(h)+this.u(h+"@"))/0x10000000000000000<t}H(t){return(4294967296*this.M()+this.M())/0x10000000000000000<t?-1:1}F(t,h){for(var s=0;(4294967296*this.M()+this.M())/0x10000000000000000<t&&s<h;)s++;return s}B(t,h,s){for(var i=0;(4294967296*this.u(s+i)+this.u(s+"@"+i))/0x10000000000000000<t&&i<h;)i++;return i}O(t){let h=0;for(let s=0;s<t.length;s++)h+=t[s];let s=this.l(0,h);for(let h=0;h<t.length;h++)if(s-=t[h],s<0)return h;return 0}q(t,h){let s=0;for(let h=0;h<t.length;h++)s+=t[h];let i=this.m(0,s,h);for(let h=0;h<t.length;h++)if(i-=t[h],i<0)return h;return 0}}function h(t,h,s){return Math.max(h,Math.min(s,t))}function s(t,h){for(var s=Math.floor(t).toString(16);s.length<h;)s="0"+s;return s}function i(t){return"#"+s(Math.floor(255*h(t[0],0,1)),2)+(s(Math.floor(255*h(t[1],0,1)),2)+s(Math.floor(255*h(t[2],0,1)),2))}function n(t,h){return[t[0]*h,t[1]*h,t[2]*h]}function e(t){var h=t[1]*t[2],s=t[2]-h,i=(t[0]%1+1)%1*6,n=Math.floor(i),e=h*(1-Math.abs(i%2-1));switch(n){case 0:return[h+s,e+s,s];case 1:return[e+s,h+s,s];case 2:return[s,h+s,e+s];case 3:return[s,e+s,h+s];case 4:return[e+s,s,h+s];default:return[h+s,s,e+s]}}class a{constructor(h){this.C=[],this.S=[],this.D=[],this.seed=h,this.r=new t(this.seed),this.N(),this.I()}N(){this.C=[],this.C[0]=.8*this.r.l(.001,1)*Math.pow(2,this.r.l(0,8)),this.C[1]=.9*this.r.l(.01,1)*Math.pow(2,this.r.l(0,8)),this.C[2]=1*this.r.l(.001,1)*Math.pow(2,this.r.l(0,8)),this.C[3]=3*this.r.l(0,1)*Math.pow(2,this.r.l(0,8)),this.C[4]=.5*this.r.l(0,1)*Math.pow(2,this.r.l(0,8)),this.C[5]=.05*this.r.l(0,1)*Math.pow(2,this.r.l(0,8)),this.C[6]=.5*this.r.l(0,1)*Math.pow(2,this.r.l(0,8))}I(){const t=1+(this.r.k(.7,"base color +1")?1:0)+this.r.B(.3,3,"base color count");for(let s=0;s<t;s++){const t="base color"+s;this.S.push(e([Math.pow(this.r.m(0,1,t+"hue"),2),h(this.r.m(-.2,1,t+"saturation"),0,Math.pow(this.r.m(0,1,t+"saturation bound"),4)),h(this.r.m(.7,1.1,t+"value"),0,1)])),this.D.push(Math.pow(2,this.r.m(0,6,t+"chances")))}}K(t){let s=this.S[t.r.O(this.D)];return t.r.g(Math.pow(this.r.m(0,.5,"base color shift chance"),2))&&(s=[s[0],s[1],s[2]],s[0]=h(s[0]+Math.pow(this.r.m(0,.6,"base color shift range red"),2)*h(t.r.l(-1,1.2),0,1)*h(t.r.H(.7)+t.r.H(.7),-1,1),0,1),s[1]=h(s[1]+Math.pow(this.r.m(0,.6,"base color shift range green"),2)*h(t.r.l(-1,1.2),0,1)*h(t.r.H(.7)+t.r.H(.7),-1,1),0,1),s[2]=h(s[2]+Math.pow(this.r.m(0,.6,"base color shift range blue"),2)*h(t.r.l(-1,1.2),0,1)*h(t.r.H(.7)+t.r.H(.7),-1,1),0,1)),s}}function o(t,h){return 1-h[1]/t.A}function c(t,h,s,i){let n=1;return s&&(n=Math.min(n,1-Math.abs(h[0]-t.j)/t.j)),i&&(n=Math.min(n,1-Math.abs(h[1]-t.G)/t.G)),n}function r(t,h){return c(t,h,!0,!0)*(1-1/((t.w+t.A)/1e3+1))*Math.pow(t.f.r.m(0,1,"master bigness"),.5)*(1-t.U())}function M(t,h){return[Math.min(h[0][0]-0,t.w-0-h[1][0]),Math.min(h[0][1]-0,t.A-0-h[1][1])]}function f(t,s,i,n){const e=t.createLinearGradient(i[0],i[1],2*s[0]-i[0],2*s[1]-i[1]),a=`rgba(0,0,0,${h(n,0,1)})`;return e.addColorStop(0,a),e.addColorStop(.5,"rgba(0,0,0,0)"),e.addColorStop(1,a),e}const u=[];u[0]=function(t,s){let e=8;const a=Math.pow(r(t,s),.3);if(t.r.g(t.f.r.m(0,.9,"com0 bigchance")*a)){const h=t.f.r.m(0,.5,"com0 bigincchance");for(;t.r.g(h*a);){const h=M(t,[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]);if(!(Math.min(h[0],h[1])>.5*e))break;e*=1.5}}const o=2*e,c=[Math.ceil(t.r.l(1,Math.max(2,.5*e))),Math.ceil(t.r.l(1,Math.max(2,.5*e)))],u=Math.min(c[0],c[1])*t.r.l(.1,1.2),l=[c[0]+2*u,c[1]+2*u],d=[Math.ceil(o/l[0]),Math.ceil(o/l[1])],m=[Math.round(d[0]*l[0]/2),Math.round(d[1]*l[1]/2)],b=t.U(),v=t.f.K(t),p=i(n(v,t.r.l(.4,1))),g=i(n(v,t.r.l(.4,1)));t.L.fillStyle="rgba(0,0,0,"+t.r.l(0,.25)+")",t.L.fillRect(s[0]-m[0]-1,s[1]-m[1]-1,l[0]*d[0]+2,l[1]*d[1]+2),t.L.fillStyle=g,t.L.fillRect(s[0]-m[0],s[1]-m[1],l[0]*d[0],l[1]*d[1]),t.L.fillStyle=p;for(let h=0;h<d[0];h++){const i=s[0]+u+h*l[0]-m[0];for(let h=0;h<d[1];h++)t.L.fillRect(i,s[1]+u+h*l[1]-m[1],c[0],c[1])}t.r.g(h(e/8*(.6*b+.3),0,.98))&&(t.L.fillStyle=f(t.L,s,[s[0]+m[0],s[1]],t.r.l(0,.9)),t.L.fillRect(s[0]-m[0],s[1]-m[1],l[0]*d[0],l[1]*d[1]))},u[1]=function(t,s){let e=8;const a=Math.pow(r(t,s),.2);if(t.r.g(t.f.r.m(.3,1,"com1 bigchance")*a)){const h=t.f.r.m(0,.6,"com1 bigincchance");for(;t.r.g(h*a);){const h=M(t,[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]);if(!(Math.min(h[0],h[1])>.5*e))break;e*=1.5}}let o=Math.ceil(t.r.l(.8,2)*e);const c=Math.ceil(t.r.l(.8,2)*e),u=t.r.v(3,Math.max(4,o)),l=Math.max(1,Math.round(o/u));o=l*u;const d=i(n(t.f.K(t),t.r.l(.5,1))),m=t.r.l(.3,.9);if(t.r.g(h(t.f.r.m(-.2,1.2,"com1 hchance"),0,1))){const h=[s[0]-Math.floor(o/2),s[1]-Math.floor(c/2)];t.L.fillStyle="rgba(0,0,0,"+t.r.l(0,.25)+")",t.L.fillRect(h[0]-1,h[1]-1,o+2,c+2),t.L.fillStyle=d,t.L.fillRect(h[0],h[1],o,c);for(let i=0;i<l;i++)t.L.fillStyle=f(t.L,[h[0]+(i+.5)*u,s[1]],[h[0]+i*u,s[1]],m),t.L.fillRect(h[0]+i*u,h[1],u,c)}else{const h=[s[0]-Math.floor(c/2),s[1]-Math.floor(o/2)];t.L.fillStyle="rgba(0,0,0,"+t.r.l(0,.25)+")",t.L.fillRect(h[0]-1,h[1]-1,c+2,o+2),t.L.fillStyle=d,t.L.fillRect(h[0],h[1],c,o);for(let i=0;i<l;i++)t.L.fillStyle=f(t.L,[s[0],h[1]+(i+.5)*u],[s[0],h[1]+i*u],m),t.L.fillRect(h[0],h[1]+i*u,o,u)}},u[2]=function(t,s){let e=8;const a=Math.pow(r(t,s),.05);if(t.r.g(t.f.r.m(0,1,"com2 bigchance")*a)){const h=t.f.r.m(0,.9,"com2 bigincchance");for(;t.r.g(h*a);){const h=M(t,[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]);if(!(Math.min(h[0],h[1])>.5*e))break;e*=1.5}}const o=Math.ceil(t.r.l(.6,1.4)*e),c=Math.ceil(t.r.l(1,2)*e),f=[Math.ceil(h(o*t.r.l(.7,1)/2,1,o)),Math.ceil(h(o*t.r.l(.8,1)/2,1,o))],u=[Math.floor(h(o*t.r.l(.05,.25),1,c)),Math.floor(h(o*t.r.l(.1,.3),1,c))],l=u[0]+u[1],d=t.r.g(Math.pow(t.f.r.m(0,1,"com2 oddchance"),.5)),m=h(Math.floor(c/l),1,c),b=m*l+(d?u[0]:0),v=t.f.K(t),p=[n(v,t.r.l(.6,1)),n(v,t.r.l(.6,1))],g=1-t.r.l(.5,.95),w=[n(p[0],g),n(p[1],g)];if(t.r.g(Math.pow(t.f.r.m(0,1,"com2 verticalchance"),.1))){const h=[t.L.createLinearGradient(s[0]-f[0],s[1],s[0]+f[0],s[1]),t.L.createLinearGradient(s[0]-f[1],s[1],s[0]+f[1],s[1])];h[0].addColorStop(0,i(w[0])),h[0].addColorStop(.5,i(p[0])),h[0].addColorStop(1,i(w[0])),h[1].addColorStop(0,i(w[1])),h[1].addColorStop(.5,i(p[1])),h[1].addColorStop(1,i(w[1]));const n=Math.floor(s[1]-b/2);for(let i=0;i<m;i++)t.L.fillStyle=h[0],t.L.fillRect(s[0]-f[0],n+i*l,2*f[0],u[0]),t.L.fillStyle=h[1],t.L.fillRect(s[0]-f[1],n+i*l+u[0],2*f[1],u[1]);d&&(t.L.fillStyle=h[0],t.L.fillRect(s[0]-f[0],n+m*l,2*f[0],u[0]))}else{const h=[t.L.createLinearGradient(s[0],s[1]-f[0],s[0],s[1]+f[0]),t.L.createLinearGradient(s[0],s[1]-f[1],s[0],s[1]+f[1])];h[0].addColorStop(0,i(w[0])),h[0].addColorStop(.5,i(p[0])),h[0].addColorStop(1,i(w[0])),h[1].addColorStop(0,i(w[1])),h[1].addColorStop(.5,i(p[1])),h[1].addColorStop(1,i(w[1]));const n=Math.floor(s[0]-b/2);for(let i=0;i<m;i++)t.L.fillStyle=h[0],t.L.fillRect(n+i*l,s[1]-f[0],u[0],2*f[0]),t.L.fillStyle=h[1],t.L.fillRect(n+i*l+u[0],s[1]-f[1],u[1],2*f[1]);d&&(t.L.fillStyle=h[0],t.L.fillRect(n+m*l,s[1]-f[0],u[0],2*f[0]))}},u[3]=function(t,h){if(t.r.g(o(t,h)-.3)||t.Y(h[0],h[1]+6*1.2)>0||t.Y(h[0],h[1]+10.8)>0)for(let s=0;s<100;s++){const s=t.r.O(t.f.C);if(3!=s)return void u[s](t,h)}let s=8;const e=Math.pow(r(t,h),.1);if(t.r.g(t.f.r.m(.6,1,"com3 bigchance")*e)){const i=t.f.r.m(.3,.8,"com3 bigincchance");for(;t.r.g(i*e);){const i=M(t,[[h[0]-s,h[1]-s],[h[0]+s,h[1]+s]]);if(!(Math.min(i[0],i[1])>.5*s))break;s*=1.5}}const a=t.r.l(1,2)*s;let c=Math.ceil(t.r.l(.3,1)*s);const f=a*t.r.l(.25,.6),l=(a+f)/2/2,d=[Math.max(1,Math.ceil(c*t.r.l(.08,.25))),Math.max(1,Math.ceil(c*t.r.l(.03,.15)))],m=d[0]+d[1],b=Math.ceil(c/m);c=b*m+d[0],t.f.I();const v=t.f.S[t.f.r.q(t.f.D,"com3 basecolor")],p=t.f.r.m(.5,.8,"com3 lightness0 mid"),g=p-t.f.r.m(.2,.4,"com3 lightness0 edge"),w=t.f.r.m(0,.2,"com3 lightness1 edge"),x=[t.L.createLinearGradient(h[0]-l,h[1],h[0]+l,h[1]),t.L.createLinearGradient(h[0]-l,h[1],h[0]+l,h[1])];x[0].addColorStop(0,i(n(v,g))),x[0].addColorStop(.5,i(n(v,p))),x[0].addColorStop(1,i(n(v,g))),x[1].addColorStop(0,i(n(v,w))),x[1].addColorStop(.5,i(v)),x[1].addColorStop(1,i(n(v,w)));const y=Math.ceil(h[1]-c/2);t.L.fillStyle=x[0],t.L.beginPath(),t.L.moveTo(h[0]-f/2,y),t.L.lineTo(h[0]+f/2,y),t.L.lineTo(h[0]+a/2,y+c),t.L.lineTo(h[0]-a/2,y+c),t.L.fill(),t.L.fillStyle=x[1];const k=[y+d[0],y+m];for(let s=0;s<b;s++){const i=[s*m+d[0],(s+1)*m],n=[k[0]+s*m,k[1]+s*m],e=[(f+i[0]/c*(a-f))/2,(f+i[1]/c*(a-f))/2];t.L.beginPath(),t.L.moveTo(h[0]-e[0],n[0]),t.L.lineTo(h[0]+e[0],n[0]),t.L.lineTo(h[0]+e[1],n[1]),t.L.lineTo(h[0]-e[1],n[1]),t.L.fill()}},u[4]=function(t,h){const s=c(t,h,!0,!1),e=t.r.l(.7,1),a=t.r.l(0,.2),o=t.f.K(t),r=i(n(o,e)),M=i(n(o,a)),f=Math.max(3,Math.ceil(t.size*Math.pow(t.r.l(.4,1),2)*t.f.r.m(.02,.1,"com4 maxwidth"))),l=Math.floor(f/2),d=f%2,m=1*Math.pow(t.f.r.m(0,1,"com4 directionc0"),4),b=.1*Math.pow(t.f.r.m(0,1,"com4 directionc1"),4),v=.2*Math.pow(t.f.r.m(0,1,"com4 directionc2"),4),p=t.r.O([m*(2-s),b,v*(1+s)]);let g=null;if(0==p){const s=Math.min(Math.max(8,h[1]-0-t.r.v(0,16)),Math.floor(.7*t.size*Math.pow(t.r.l(0,1),t.f.r.m(2,6,"com4 hpower0")))),i=[[h[0]-l,h[1]-s],[h[0]+l+d,h[1]]],n=t.L.createLinearGradient(i[0][0],i[0][1],i[1][0],i[0][1]);n.addColorStop(0,M),n.addColorStop(.5,r),n.addColorStop(1,M),t.L.fillStyle=n,t.L.fillRect(i[0][0],i[0][1],f,s),g=[h[0],h[1]-s]}else if(1==p){const s=Math.min(Math.max(8,t.A-(0+h[1])-t.r.v(0,16)),Math.floor(.6*t.size*Math.pow(t.r.l(0,1),t.f.r.m(2,7,"com4 hpower1")))),i=[[h[0]-l,h[1]],[h[0]+l+d,h[1]+s]],n=t.L.createLinearGradient(i[0][0],i[0][1],i[1][0],i[0][1]);n.addColorStop(0,M),n.addColorStop(.5,r),n.addColorStop(1,M),t.L.fillStyle=n,t.L.fillRect(i[0][0],i[0][1],f,s),g=[h[0],h[1]+s]}else if(2==p){const s=t.L.createLinearGradient(h[0],h[1]-l,h[0],h[1]+l+d);s.addColorStop(0,M),s.addColorStop(.5,r),s.addColorStop(1,M),t.L.fillStyle=s,t.L.fillRect(h[0],h[1]-l,Math.ceil(t.j-h[0])+1,f),g=[Math.floor(t.j),h[1]]}const w=[.6*Math.pow(t.f.r.m(0,1,"com4 covercomc0"),2),.2*Math.pow(t.f.r.m(0,1,"com4 covercomc1"),2),1*Math.pow(t.f.r.m(0,1,"com4 covercomc2"),2)];if(u[t.r.O(w)](t,h),t.Y(g[0],g[1])>0){const h=[g[0]+Math.round(6*t.r.l(-1,1)),g[1]+Math.round(6*t.r.l(-1,1))];t.Y(h[0],h[1])>0?u[t.r.O(w)](t,h):u[t.r.O(w)](t,g)}},u[5]=function(t,h){let s=8;const e=Math.pow(r(t,h),.1);if(t.r.g(t.f.r.m(0,.9,"com5 bigchance")*e)){const i=t.f.r.m(0,.8,"com5 bigincchance");for(;t.r.g(i*e);){const i=M(t,[[h[0]-s,h[1]-s],[h[0]+s,h[1]+s]]);if(!(Math.min(i[0],i[1])>.5*s))break;s*=1.5}}const a=t.r.l(.75,1),o=t.r.l(0,.25),c=t.f.K(t),f=i(n(c,a)),u=i(n(c,o)),l=1+t.r.F(t.f.r.m(0,1,"com5 multxc"),Math.floor(1.2*Math.pow(s/8,.6))),d=1+t.r.F(t.f.r.m(0,1,"com5 multyc"),Math.floor(1.2*Math.pow(s/8,.6))),m=t.r.l(.5,1)*s/Math.max(l,d),b=m+.5,v=m+1,p=.2*m,g=[h[0]-m*l,h[1]-m*d];t.L.fillStyle="rgba(0,0,0,"+t.r.l(0,.2)+")";for(let h=0;h<l;h++){const s=g[0]+(2*h+1)*m;for(let h=0;h<d;h++){const i=g[1]+(2*h+1)*m;t.L.beginPath(),t.L.arc(s,i,v,0,2*Math.PI),t.L.fill()}}for(let h=0;h<l;h++){const s=g[0]+(2*h+1)*m;for(let h=0;h<d;h++){const i=g[1]+(2*h+1)*m,n=t.L.createRadialGradient(s,i,p,s,i,b);n.addColorStop(0,f),n.addColorStop(1,u),t.L.fillStyle=n,t.L.beginPath(),t.L.arc(s,i,b,0,2*Math.PI),t.L.fill()}}},u[6]=function(t,h){if(t.P<=0||t.r.g(o(t,h)))return void u[t.r.O(function(t,h,s){const i=[,,,,,];for(let h=5;h>=0;h--)i[h-0]=t[h];return i}(t.f.C))](t,h);let s=8;const e=Math.pow(r(t,h),.05);if(t.r.g(t.f.r.m(0,.9,"com6 bigchance")*e)){const i=t.f.r.m(0,.8,"com6 bigincchance");for(;t.r.g(i*e);){const i=M(t,[[h[0]-s,h[1]-s],[h[0]+s,h[1]+s]]);if(!(Math.min(i[0],i[1])>.5*s))break;s*=1.5}}const a=Math.ceil(2*s*t.r.l(.6,1)),c=Math.floor(a/2),f=a%2,l=a*Math.pow(t.r.l(Math.pow(t.f.r.m(0,.8,"com6 h1min"),.5),.9),t.f.r.m(.5,1.5,"com6 h1power")),d=Math.floor(l/2),m=a%2,b=Math.max(0-(a-l)/2,a*(t.r.l(0,.45)+t.r.l(0,.45))*(t.f.r.k(.8,"com6 backnesstype")?t.f.r.m(.2,.9,"com6 backness#pos"):t.f.r.m(-.2,-.05,"com6 backness#neg"))),v=Math.ceil(s*t.r.l(.7,1)*Math.pow(t.f.r.m(.1,3.5,"com6 width"),.5)),p=Math.floor(v/2),g=v%2,w=[[h[0]-p,h[1]+b-d],[h[0]+p+g,h[1]-c],[h[0]+p+g,h[1]+c+f],[h[0]-p,h[1]+b+d+m]],x=t.f.K(t);t.L.fillStyle="rgba(0,0,0,"+t.r.l(0,.2)+")",t.L.beginPath(),t.L.moveTo(w[0][0]-1,w[0][1]),t.L.lineTo(w[1][0]-1,w[1][1]),t.L.lineTo(w[2][0]-1,w[2][1]),t.L.lineTo(w[3][0]-1,w[3][1]),t.L.fill(),t.L.fillStyle=i(n(x,t.r.l(.7,1))),t.L.beginPath(),t.L.moveTo(w[0][0],w[0][1]),t.L.lineTo(w[1][0],w[1][1]),t.L.lineTo(w[2][0],w[2][1]),t.L.lineTo(w[3][0],w[3][1]),t.L.fill()};const l=[];l[0]=function(t){const s=(t.w-0)*(t.A-0)*.05,i=Math.ceil((t.w-0)*t.f.r.m(.1,1,"outline0 iw")*.2),n=[[[t.j-i,0],[t.j+i,t.A-0]]],e=2+Math.floor(t.r.l(.5,1)*t.f.r.m(2,8,"outline0 bc")*Math.sqrt(t.size));for(let i=1;i<e;i++){const i=n[t.r.v(0,n.length-1)],e=[i[0][0]+t.r.l(0,1)*(i[1][0]-i[0][0]),i[0][1]+t.r.l(0,1)*(i[1][1]-i[0][1])];e[1]<.5*(i[0][1]+i[1][1])&&t.r.g(t.f.r.m(.5,1.5,"outline0 frontbias"))&&(e[1]=i[1][1]-(e[1]-i[0][1]));const a=[h(t.r.l(0,1)*t.w,0,t.w-0),h(t.r.l(0,1)*t.A,0,t.A-0)],o=s/Math.abs((a[0]-e[0])*(a[1]-e[1]));if(o<1&&(a[0]=e[0]+(a[0]-e[0])*o,a[1]=e[1]+(a[1]-e[1])*o),e[0]>a[0]){const t=e[0];e[0]=a[0],a[0]=t}if(e[1]>a[1]){const t=e[1];e[1]=a[1],a[1]=t}n.push([[Math.floor(e[0]),Math.floor(e[1])],[Math.ceil(a[0]),Math.ceil(a[1])]])}t.T.fillStyle="#FFFFFF";for(let h=0;h<n.length;h++){const s=n[h];t.T.fillRect(s[0][0],s[0][1],s[1][0]-s[0][0],s[1][1]-s[0][1]),t.T.fillRect(t.w-s[1][0],s[0][1],s[1][0]-s[0][0],s[1][1]-s[0][1])}},l[1]=function(t){const h=Math.max(2,Math.sqrt((t.w-0)*(t.A-0)*.05/Math.PI)),s=Math.ceil((t.w-0)*t.f.r.m(.1,1,"outline1 iw")*.2),i=[],n=Math.floor((t.A-0)/(2*s));for(let h=0;h<n;h++)i.push({X:[t.j,t.A-(0+s*(2*h+1))],r:s});const e=n+Math.floor(t.r.l(.5,1)*t.f.r.m(10,50,"outline1 cc")*Math.sqrt(t.size));for(let s=n;s<e;s++){const s=i[Math.max(t.r.v(0,i.length-1),t.r.v(0,i.length-1))];let n=t.r.l(1,h);const e=t.r.l(Math.max(0,s.r-n),s.r);let a=t.r.l(0,2*Math.PI);a>Math.PI&&t.r.g(t.f.r.m(.5,1.5,"outline1 frontbias"))&&(a=t.r.l(0,Math.PI));let o=[s.X[0]+Math.cos(a)*e,s.X[1]+Math.sin(a)*e];n=Math.min(n,o[0]-0),n=Math.min(n,t.w-0-o[0]),n=Math.min(n,o[1]-0),n=Math.min(n,t.A-0-o[1]),i.push({X:o,r:n})}t.T.fillStyle="#fff";for(let h=0;h<i.length;h++){const s=i[h];t.T.beginPath(),t.T.arc(s.X[0],s.X[1],s.r,0,2*Math.PI),t.T.fill(),t.T.beginPath(),t.T.arc(t.w-s.X[0],s.X[1],s.r,0,2*Math.PI),t.T.fill()}},l[2]=function(t){const h=[t.w-0,t.A-0],s=[[t.j,t.r.l(0,.05)*h[1]+0],[t.j,t.r.l(.95,1)*h[1]+0]],i=6/t.size+t.f.r.m(.03,.1,"outline2 basefatness"),n=Math.max(3,Math.ceil(1/i*t.r.l(.05,.1)*Math.sqrt(t.size)));t.T.lineCap=["round","square"][t.f.r.p(0,1,"outline2 linecap")],t.T.strokeStyle="#fff";for(let e=1;e<n;e++){let n=s[e];null==n&&(n=[t.r.l(0,1)*h[0]+0,Math.pow(t.r.l(0,1),t.f.r.m(.1,1,"outline2 frontbias"))*h[1]+0],s.push(n));const a=1+t.r.F(t.f.r.m(0,1,"outline2 conadjust"),3);for(let h=0;h<a;h++){const h=s[t.r.v(0,s.length-2)];t.T.lineWidth=t.r.l(.7,1)*i*t.size,t.T.beginPath(),t.T.moveTo(h[0],h[1]),t.T.lineTo(n[0],n[1]),t.T.stroke(),t.T.beginPath(),t.T.moveTo(t.w-h[0],h[1]),t.T.lineTo(t.w-n[0],n[1]),t.T.stroke()}}};class d{constructor(h,s,i){this.Z=0,this.P=0,this.J=0,this.V=0,this.f=h,this.W=s,this.seed=this.f.seed+this.W,this.r=new t(this.seed),this.size=null==i?this.r.l(this.f.r.m(2.5,3.5,"size min"),this.f.r.m(5,7,"size max"))**3:i;const n=this.r.l(this.f.r.m(.5,1,"wratio min"),this.f.r.m(1,1.3,"wratio max")),e=this.r.l(this.f.r.m(.7,1,"hratio min"),this.f.r.m(1.1,1.7,"hratio max"));this.w=Math.floor(this.size*n)+0,this.j=Math.floor(this.w/2),this.R=Math.floor((this.w-0)/6),this.$=.5*(this.w-6*this.R),this.A=Math.floor(this.size*e)+0,this.G=Math.floor(this.A/2),this._=Math.floor((this.A-0)/6),this.tt=.5*(this.A-6*this._),this.ht=document.createElement("canvas"),this.ht.setAttribute("width",this.w+""),this.ht.setAttribute("height",this.A+""),this.T=this.ht.getContext("2d"),this.st=document.createElement("canvas"),this.st.setAttribute("width",this.w+""),this.st.setAttribute("height",this.A+""),this.L=this.st.getContext("2d"),l[this.f.r.q([1,1,1],"outline type")](this),this.it=this.T.getImageData(0,0,this.w,this.A),this.nt=[];for(let t=0;t<this.R;t++){this.nt[t]=[];for(let h=0;h<this._;h++)this.nt[t][h]={et:t,at:h,x:Math.floor(this.$+6*(t+.5)),y:Math.floor(this.tt+6*(h+.5)),state:0}}this.ot=[this.nt[Math.floor(this.R/2)][Math.floor(this._/2)]];let a=0;for(;a<this.ot.length;){const t=this.ot[a];if(t.et>0){const h=this.nt[t.et-1][t.at];0==h.state&&(this.ct(h.x,h.y)>0?(h.state=1,this.ot.push(h)):h.state=-1)}if(t.et<this.R-1){const h=this.nt[t.et+1][t.at];0==h.state&&(this.ct(h.x,h.y)>0?(h.state=1,this.ot.push(h)):h.state=-1)}if(t.at>0){const h=this.nt[t.et][t.at-1];0==h.state&&(this.ct(h.x,h.y)>0?(h.state=1,this.ot.push(h)):h.state=-1)}if(t.at<this._-1){const h=this.nt[t.et][t.at+1];0==h.state&&(this.ct(h.x,h.y)>0?(h.state=1,this.ot.push(h)):h.state=-1)}a++}for(let t=0;t<this.ot.length;t++){const h=this.ot[t],s=this.nt[this.R-1-h.et][h.at];1!=s.state&&(s.state=1,this.ot.push(s))}this.rt=this.f.r.p(1,2,"base component passes"),this.Mt=Math.max(1,Math.floor(this.ot.length*this.f.r.m(0,1/this.rt,"extra component amount"))),this.ft=this.rt*this.ot.length+this.Mt}ut(t,h){const s=Math.floor((t-this.$)/6),i=Math.floor((h-this.tt)/6);return s<0||s>=this.R||i<0||i>=this._?null:this.nt[s][i]}Y(t,h){const s=this.ut(t,h);return null==s?0:s.state}ct(t,h){return t=Math.floor(t),h=Math.floor(h),t<0||t>this.w||h<0||h>this.A?-1:this.it.data[4*(h*this.w+t)+3]}U(){return this.V/this.ft}lt(){let t;if(this.P<this.rt)this.J<this.ot.length?(t=this.ot[this.J],this.J++):(this.P++,t=this.ot[0],this.J=1);else{if(!(this.Z<this.Mt))return!0;t=this.ot[this.r.v(0,this.ot.length-1)],this.Z++}let h=[t.x,t.y];for(let s=0;s<10;s++){const s=[t.x+this.r.v(-6,6),t.y+this.r.v(-6,6)];if(!(s[0]<0||s[0]>this.w-0||s[1]<0||s[1]>this.A-0||this.ct(s[0],s[1])<=0)){h=s;break}}return Math.abs(h[0]-this.j)<6&&this.r.g(this.f.r.m(0,1,"com middleness"))&&(h[0]=Math.floor(this.j)),u[this.r.O(this.f.C)](this,h),this.V++,!1}}function m(t){return new a(t)}function b(t,h,s){const i=new d(t,h,s);return function(t){var h=!1;do{h=t.lt()}while(!h);t.L.clearRect(t.j+t.w%2,0,t.w,t.A),t.L.scale(-1,1),t.L.drawImage(t.st,0-t.w,0)}(i),i}function v(t){const h=t.getContext("2d");let s=t.width,i=t.height;const n=h.getImageData(0,0,s,i),e=function(t,h,s){for(let i=0;i<s;i++)for(let s=0;s<h;s++)if(t.data[4*(i*h+s)+3]>0)return i;return-1}(n,s,i),a=function(t,h,s){for(let i=s-1;i>=0;i--)for(let s=0;s<h;s++)if(t.data[4*(i*h+s)+3]>0)return i;return-1}(n,s,i),o=function(t,h,s){for(let i=0;i<h;i++)for(let n=0;n<s;n++)if(t.data[4*(n*h+i)+3]>0)return i;return-1}(n,s,i),c=function(t,h,s){for(let i=h-1;i>=0;i--)for(let n=0;n<s;n++)if(t.data[4*(n*h+i)+3]>0)return i;return-1}(n,s,i);if(e<0)return t.width=0,t.height=0,[0,0];s=1+c-o,i=1+a-e;const r=h.getImageData(o,e,s,i);return t.width=s,t.height=i,h.putImageData(r,0,0),[o,e]}function p(t){const h=function(t,h,s,i){const n=Math.floor(t/s),e=Math.floor(h/s),a=[],o=Math.floor(h/(2*e));for(let s=0;s<e;s++){const i=s%2==0?n:n-1,c=Math.floor(s%2==0?t/(2*n):t/n);for(let r=0;r<i;r++)a.push([c+Math.round((r+1*(Math.random()-.5))*t/n),o+Math.round((s+1*(Math.random()-.5))*h/e)])}return a}(t.width,t.height,Math.max(12,Math.floor(Math.min(t.width,t.height)/12))),s=t.getContext("2d"),i=t.width,n=t.height,e=s.getImageData(0,0,i,n),a=h.map((()=>({dt:-1,bt:-1,vt:-1,gt:-1,points:[]})));for(let t=0;t<n;t++)for(let s=0;s<i;s++){const n=4*(t*i+s);if(0===e.data[n+3])continue;let o=Math.hypot(h[0][0]-s,h[0][1]-t),c=0;for(let i=1;i<h.length;i++){const n=Math.hypot(h[i][0]-s,h[i][1]-t);n<o&&(o=n,c=i)}const r=a[c];r.dt<0?(r.dt=s,r.bt=t,r.vt=s,r.gt=t):(s<r.dt&&(r.dt=s),s>r.vt&&(r.vt=s),t<r.bt&&(r.bt=t),t>r.gt&&(r.gt=t)),r.points.push([s,t,e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]])}const o=[];for(let t=0;t<a.length;t++){const s=a[t];if(s.dt>-1){const i=s.vt-s.dt+1,n=s.gt-s.bt+1,e=document.createElement("canvas");e.width=i,e.height=n;const a=e.getContext("2d"),c=a.createImageData(e.width,e.height);s.points.forEach((t=>{const h=4*((t[1]-s.bt)*i+(t[0]-s.dt));c.data[h]=t[2],c.data[h+1]=t[3],c.data[h+2]=t[4],c.data[h+3]=t[5]})),a.putImageData(c,0,0),o.push({wt:h[t],canvas:e,xt:[s.dt,s.bt]})}}return o}function g(t,h,s){const i=1.5+1.5*Math.random(),n=t.wt[0]-h/2,e=t.wt[1]-s/2,a=Math.sqrt(n*n+e*e),o=a*a,c=a*i;t.yt=(c-a)*Math.sqrt((o-e*e)/o)*(n>0?1:-1),t.kt=(c-a)*Math.sqrt((o-n*n)/o)*(e>0?1:-1),t.angle=(720*Math.random()-360)/((Math.random()+2)*t.canvas.width)*10*(Math.PI/180)}function w(t){const h=document.createElement("canvas"),{width:s,height:i}=t;h.width=s,h.height=i;const n=t.getContext("2d"),e=h.getContext("2d"),a=n.getImageData(0,0,s,i),{data:o}=a,{length:c}=o;for(let t=0;t<c;t+=4){const h=o[t+0],s=o[t+1],i=o[t+2];o[t+0]=255-(.393*h+.769*s+.189*i),o[t+1]=255-(.349*h+.686*s+.168*i),o[t+2]=255-(.272*h+.534*s+.131*i)}return e.putImageData(a,0,0),h}function x(t){const h=document.createElement("canvas");h.width=Math.floor(2*P),h.height=Math.floor(2*T);const s=h.getContext("2d"),i=h.width/2-15,n=h.height/2-30;s.setTransform(1.5,0,0,T/P*1.5,0,0);const e=s.createRadialGradient(i,n,10,i,n,30-3*t);return e.addColorStop(0,"transparent"),e.addColorStop(.7,"blue"),e.addColorStop(1,"cyan"),s.fillStyle=e,s.beginPath(),s.arc(i,n,P/2,0,7),s.fill(),v(h),h}function y(t){const h=document.createElement("canvas");h.width=20,h.height=20;const s=h.getContext("2d");var i=s.createRadialGradient(10,10,0,10,10,10);return i.addColorStop(t,"yellow"),i.addColorStop(1,"red"),s.fillStyle=i,s.beginPath(),s.arc(10,10,10,0,7),s.fill(),h}function k(t){const h=document.createElement("canvas");h.width=t.width,h.height=t.height;const s=h.getContext("2d");return s.scale(1,-1),s.drawImage(t,0,0,t.width,-t.height),h}const H=480,F=700,B=240,O=350;let q,C,S=!1,D=!1,N=-1,I=-1,K=-1,A=-1,Q=-1,j=-1,G={},U=!1,L=document.getElementById("a");const Y=b(m("piBbgDn4CZqlkqiF"),"ie7jMyCFouoUjkVs",60).st;v(Y);const z=p(Y),P=Y.width,T=Y.height,X=Y.getContext("2d").getImageData(0,0,P,T).data;let Z,E,J,V,W,R=[q,C,P,T,X];!function(t){const h=document.createElement("canvas");h.width=32,h.height=32;const s=h.getContext("2d");let i,n;t.width>t.height?(i=32,n=32*t.height/t.width):(n=32,i=32*t.width/t.height),s.drawImage(t,0,0,i,n);const e=document.createElement("link");e.setAttribute("rel","icon"),e.setAttribute("href",h.toDataURL()),document.head.appendChild(e)}(Y);const $=function(){const t=[];for(let h=0;h<5;h++)t.push(x(h));return t}(),_=[],[tt,ht]=function(){const t=document.createElement("canvas");t.width=20,t.height=60;const h=t.getContext("2d");return h.fillStyle="yellow",h.beginPath(),h.moveTo(10,60),h.lineTo(20,10),h.arc(10,10,10,0,Math.PI,!0),h.lineTo(10,60),h.fill(),h.strokeStyle="cyan",h.shadowColor="blue",h.globalCompositeOperation="source-atop",h.shadowBlur=4,h.lineWidth=10,h.beginPath(),h.moveTo(10,70),h.lineTo(23,10),h.arc(10,10,13,0,Math.PI,!0),h.lineTo(10,70),h.stroke(),[t,h.getImageData(0,0,t.width,t.height).data]}(),st=function(){const t=[];for(let h=0;h<9;h++)t.push(y(h/10));for(let h=t.length-2;h>=1;h--)t.push(t[h]);return t}(),it=st[0].getContext("2d").getImageData(0,0,st[0].width,st[0].height).data,[nt,et]=function(){const t=document.createElement("canvas");t.width=60,t.height=60;const h=t.getContext("2d");var s=h.createRadialGradient(30,30,0,30,30,30);return s.addColorStop(.6,"navy"),s.addColorStop(1,"blue"),h.fillStyle=s,h.beginPath(),h.arc(30,30,30,0,7),h.fill(),[t,h.getImageData(0,0,t.width,t.height).data]}();let at,ot,ct,rt=performance.now(),Mt=0;const ft=JSON.parse(self.localStorage.pnf_highscores||"false")||[];let ut=-1;const lt=function(){const t=document.createElement("canvas");t.width=100,t.height=100;const h=t.getContext("2d");h.font="bold 20px Helvetica",h.translate(50,50),h.rotate(-Math.PI/2),h.fillStyle="red",h.fillStyle="#fff",h.textAlign="center",h.textBaseline="middle",h.fillText("NEW!",0,0),v(t);const s=document.createElement("canvas");s.width=t.width+10,s.height=t.height+10;const i=s.getContext("2d");return i.fillStyle="red",i.fillRect(0,0,s.width,s.height),i.drawImage(t,5,5),s}();function dt(t){ot+=t,ct=(new Intl.NumberFormat).format(ot)}function mt(){const t=Math.max(400,1e3-25*at);Qt+=Kt.v(t,t+400)}let bt,vt,pt,gt;function wt(t){const h=t[0];v(h);const s=h.getContext("2d").getImageData(0,0,h.width,h.height).data,i=w(h),n=p(h);t[1]=s,t[2]=i,t[3]=n}const xt=[["c4pf4K5xHzu4CyZM","Wl9w64KNQvFNbbbU",50,10,.35,0,[]],["VTjHVRDIYTbXk766","a3QM5c7MnbQlWns3",80,30,.27,0,[]],["1fOXvyryYCvwBWPL","I4xttvPYWxB1So2A",230,80,.2,6,[]],["VsM4qdcBSiuCPDGJ","q4D72OvJMb23kSZC",60,20,.4,0,[]],["l4pyu8yF0mt84Q4u","jPU5GcKNpf2JMgoG",100,40,.35,0,[[O]]],["NMp3mtsPHIwzMKYk","dBzvSKo7wpema3S5",220,90,.22,9,[]],["o67yOby6izpasGgo","fyKKupDEId96qQHu",70,20,.5,0,[[O]]],["IU7xqL8UqZIXJQDQ","aVBO8buAfBbQ4DOY",100,40,.35,0,[[O,6]]],["LP6kUeGMn7S5xZzi","p5O7jAQK67mDULTD",230,100,.25,14,[]],["SsSvCKpjLVTGITYH","aOEjI2Owpqpl06ex",65,30,.5,0,[[O]]],["AGUwhB1E94wgKe49","pwUtokX7oS7ZKFK1",110,50,.35,6,[[O,6]]],["qRF6GA3xnzX0lMcH","RIdNudvB6T2ro7C3",240,120,.3,22,[]]];function yt(t,h){const s=t[0]-t[2]/2<h[0]-h[2]/2?[t,h]:[h,t],i=t[1]-t[3]/2<h[1]-h[3]/2?[t,h]:[h,t];if(s[0][0]+s[0][2]/2>s[1][0]-s[1][2]/2&&i[0][1]+i[0][3]/2>i[1][1]-i[1][3]/2){const n=Math.floor(s[1][0]-s[1][2]/2),e=Math.floor(i[1][1]-i[1][3]/2),a=Math.floor(Math.min(s[0][0]+s[0][2]/2,s[1][0]+s[1][2]/2))-n,o=Math.floor(Math.min(i[0][1]+i[0][3]/2,i[1][1]+i[1][3]/2))-e,c=n-Math.floor(t[0]-t[2]/2),r=e-Math.floor(t[1]-t[3]/2),M=n-Math.floor(h[0]-h[2]/2),f=e-Math.floor(h[1]-h[3]/2);for(let s=0;s<o;s++)for(let i=0;i<a;i++)if(t[4][4*((r+s)*t[2]+c+i)+3]>0&&h[4][4*((f+s)*h[2]+M+i)+3]>0)return!0}return!1}const kt=[["F","orange",t=>{J=t+6500}],["S","cyan",()=>{W++}],["B","red",t=>{V=t+1e3,Qt+=1500}]];class Ht{constructor(t,h,s,i){this.x=t,this.y=h,this.type=s,this.Ht=i,this.frame=0,this.Ft=!0}Bt(t,h,s){if(this.y+=5*(s-this.Ht)/32,this.frame=(this.frame+1)%50,!Z&&yt(R,[this.x,this.y,nt.width,nt.height,et]))return kt[this.type][2](s),!1;if(this.y-Math.floor(nt.height/2)>F)return!1;this.Ht=s,h.save(),h.translate(this.x,this.y),h.drawImage(nt,-Math.floor(nt.width/2),-Math.floor(nt.height/2)),h.textAlign="center",h.textBaseline="top";let i=65;i+=this.frame<25?this.frame:50-this.frame,h.font="700 "+Math.floor(i/2)+"px Helvetica";const n=h.measureText(kt[this.type][0]),e=n.actualBoundingBoxDescent-n.actualBoundingBoxAscent;return h.fillStyle=kt[this.type][1],h.fillText(kt[this.type][0],0,-Math.floor(e/2)),h.restore(),!0}}class Ft{constructor(t,h,s){this.x=t,this.y=h,this.Ht=s,this.Ot=10}Bt(t,h,s){this.y-=20*(s-this.Ht)/32;const i=[this.x,this.y,tt.width,tt.height,ht];for(let h=0;h<t.length;h++){const n=t[h];if(yt(i,n.qt))return n.Ct(this.Ot,s),!1}return!(this.y+Math.floor(tt.height/2)<0||(this.Ht=s,h.drawImage(tt,this.x-Math.floor(tt.width/2),this.y-Math.floor(tt.height/2)),0))}}class Bt{constructor(t,h,s,i,n){this.time=n,this.wt=t.wt,this.canvas=t.canvas,this.xt=t.xt,this.yt=t.yt,this.kt=t.kt,this.angle=t.angle,this.St=h,this.Dt=s,this.duration=i}Bt(t,h,s){const i=s-this.time;if(i>this.duration)return!1;const n=this.St+this.wt[0]+this.yt*Math.min(i,this.duration)/this.duration,e=this.Dt+this.wt[1]+this.kt*Math.min(i,this.duration)/this.duration;return h.save(),h.globalAlpha=1-(Math.min(i,this.duration)/this.duration)**2,h.translate(n,e),h.rotate(this.angle*Math.min(i,this.duration)/this.duration),h.drawImage(this.canvas,this.xt[0]-this.wt[0],this.xt[1]-this.wt[1]),h.restore(),!0}}class Ot{constructor(t,h,s,i,n,e){this.width=st[0].width,this.height=st[0].height,this.x=t,this.y=h;const a=Math.sqrt((s-t)**2+(i-h)**2);this.Nt=(s-t)/a,this.It=(i-h)/a,this.Ht=e,this.speed=n,this.frame=0,this.Ft=!0,this.Kt()}Bt(t,h,s){if(V>s)return!1;const i=s-this.Ht;if(this.y+=i*this.speed*this.It,this.x+=i*this.speed*this.Nt,this.Kt(),yt(R,this.qt)){if(W)return W--,!1;Z=!0}return!(this.y-Math.floor(this.height/2)>F||this.y+Math.floor(this.height/2)<0||this.x-Math.floor(this.width/2)>H||this.x+Math.floor(this.width/2)<0||(this.Ht=s,this.frame=(this.frame+1)%st.length,h.drawImage(st[this.frame],this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height),0))}Kt(){this.qt=[this.x,this.y,this.width,this.height,it]}}function qt(t,h,s,i,n,e){const a=[];for(let o=0;o<t;o++){const c=i+2*o*Math.PI/t;a.push(new Ot(h,s,h+Math.round(100*Math.cos(c)),s+Math.round(100*Math.sin(c)),n,e))}return a}class Ct{constructor(t,h,s,i,n,e,a,o,c,r,M,f){this.At=Kt.l(0,2*Math.PI),this.canvas=t,this.mask=h,this.Qt=s,this.width=t.width,this.height=t.height,this.jt=o,this.x=n,this.y=e,this.Ht=f,this.Gt=0,this.Ut=i,this.speed=a,this.points=c,this.Lt=r,this.Yt=M,this.Kt()}Bt(t,h,s){const i=this.y;let n=!1;if(this.jt<=0||V>s?n=!0:(this.y+=(s-this.Ht)*this.speed,this.Kt(),yt(R,this.qt)&&(W?(W--,n=!0):Z=!0)),n)return dt(this.points),(this.Lt>0?qt(this.Lt,this.x,this.y+Math.round(17*this.speed),this.At,.45,s):[]).concat(this.Ut.map((t=>(g(t,this.width,this.height),new Bt(t,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),500,s)))));if(this.y-Math.floor(this.height/2)>F)return!1;this.Ht=s;const e=s-this.Gt;let a=0;if(e<400&&(a=(400-e)/400),h.save(),h.drawImage(this.canvas,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height),a>0&&(h.globalAlpha=a,h.drawImage(this.Qt,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height)),h.restore(),!Z)for(let t=0;t<this.Yt.length;t++){const h=this.Yt[t][0];if(i<h&&this.y>h){const h=this.Yt[t][1],i=this.y+Math.round(17*this.speed);return h?[this,...qt(h,this.x,i,this.At,.3,s)]:[this,new Ot(this.x,i,q,C,.3,s)]}}return!0}Kt(){this.qt=[this.x,this.y,this.width,this.height,this.mask]}Ct(t,h){this.Gt=h,this.jt-=t}}class St{constructor(t,h){this.state=0,this.zt=h+2e3,this.jt=Number.MAX_SAFE_INTEGER,this.Ht=h,this.width=bt.width,this.height=bt.height,this.x=B,this.y=-this.height/2,this.direction=0,this.Gt=0,this.level=t,this.Kt()}Bt(t,h,s){let i=!1;if(this.jt<=0)i=!0;else{const t=s-this.Ht;0===this.state?s>this.zt&&(this.state=1):1===this.state?(this.y+=.15*t,this.y>150&&(this.y=150,this.jt=100+250*this.level,this.state=2,this.Pt=s,this.Tt=0)):0===this.direction?(this.x+=.1*t,this.x+Math.floor(this.width/2)>H&&(this.x=H-Math.floor(this.width/2),this.direction=1)):(this.x-=.1*t,this.x-Math.floor(this.width/2)<0&&(this.x=Math.floor(this.width/2),this.direction=0)),this.Kt(),yt(R,this.qt)&&(Z=!0)}if(i)return dt(500*at),Lt=!1,jt=s+1e4,Qt=500+s,mt(),Gt=500+s,gt.map((t=>(g(t,this.width,this.height),new Bt(t,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),500,s))));this.Ht=s;const n=s-this.Gt;let e=0;if(n<400&&(e=(400-n)/400),h.save(),h.drawImage(bt,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height),e>0&&(h.globalAlpha=e,h.drawImage(pt,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height)),h.restore(),!Z&&2===this.state&&this.Pt<s){const t=[];if(this.Tt<5*this.level){let h,i;switch(Math.floor(this.Tt/this.level)){case 0:h=28,i=119;break;case 1:h=42,i=123;break;case 2:h=108,i=94;break;case 3:h=121,i=80;break;default:h=143,i=50}t.push(new Ot(this.x-h,this.y+i,this.x-h,this.y+i+100,.5,s)),t.push(new Ot(this.x+h,this.y+i,this.x+h,this.y+i+100,.5,s))}else t.push(new Ot(this.x,this.y+125,q,C,.3,s));return this.Tt++,this.Tt>=10*this.level?(this.Tt=0,this.Pt=s+800):this.Pt=this.Tt>5*this.level?s+200:this.Tt===5*this.level?s+800:this.Tt%this.level?s+180:s+500,[this,...t]}return!0}Kt(){this.qt=[this.x,this.y,this.width,this.height,vt]}Ct(t,h){this.Gt=h,this.jt-=t}}let Dt,Nt,It,Kt,At,Qt,jt,Gt,Ut,Lt,Yt,zt=5;self.onload=h=>{L.width=H,L.height=F,L.getContext("2d"),requestAnimationFrame((function h(s){(function(h){switch(Mt){case 0:case 1:!function(h){const s=L.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,H,F),s.fillStyle="#fff";let i=(h-rt)/3e3;s.save();for(let t=200;t--;){let h=50/(6-(i+t/13)%6);s.globalAlpha=Math.min(h/100,1),s.beginPath(),s.arc(Math.cos(t)*h+B,Math.sin(t*t)*h+O,h/200,0,7),s.fill()}if(s.restore(),s.textBaseline="middle",s.textAlign="center",1===Mt){if(0===ft.length)s.font="bold 40px Helvetica",s.fillText("PLANET NOT FOUND",B,O);else{s.font="bold 30px Helvetica",s.fillText("HIGH SCORES",B,100),s.save(),s.textAlign="start",s.textBaseline="top";for(let t=0;t<ft.length;t++){t===ut?(s.save(),s.translate(90,185+80*t),s.drawImage(lt,-Math.floor(lt.width/2),-Math.floor(lt.height/2)),s.restore(),s.fillStyle="gold"):s.fillStyle="#fff";const h=Intl.NumberFormat().format(ft[t][0]),i=new Date(ft[t][1]).toLocaleString();s.font="50px Helvetica",s.fillText(t+1+"",115,160+80*t),s.font="60px Helvetica",s.fillText("{",145,150+80*t),s.font="25px Helvetica",s.fillText(h+" points",170,160+80*t),s.font="15px Helvetica",s.fillText(i,170,190+80*t)}s.restore()}s.font="20px Helvetica",s.fillText("<Press anywhere or any key to play>",B,670),S||U?D||(Mt=2,at=0,Kt=new t("enemy"),At=new t("powerup"),Qt=1e3,jt=5e3,Gt=9e3,Ut=0,It=0,Dt=[],Nt=[],rt=performance.now(),Yt=performance.now(),ot=0,dt(0),Z=!1,q=B,C=630,J=0,V=0,W=1,Lt=!1,ut=-1):D=!1}else if(s.font="italic 30px Helvetica",s.fillText("Loading…",B,O),bt)if(_.length<xt.length)_.push(function(t,h,s,...i){return[k(b(m(t),h,s).st),void 0,void 0,void 0,...i]}(...xt[_.length]));else{let t=!0;for(let h=0;t&&h<_.length;h++)_[h][1]||(t=!1,wt(_[h]));t&&(Mt=1)}else bt=k(b(m("HYj7ADLjQr6icLtO"),"CdiB9N2ZoQWuAxur",270).st),v(bt),pt=w(bt),gt=p(bt),vt=bt.getContext("2d").getImageData(0,0,bt.width,bt.height).data}(h);break;case 2:!function(t){const h=t-Yt;if(Yt=t,h>160)return rt+=h,void(G=[]);if(!Z){const t=.6*h,s=G.Xt||G.Zt,i=G.Et||G.Jt,n=G.Vt||G.Wt,e=G.Rt||G.$t;if(s||i||n||e){const h=(s||i)&&(n||e)?Math.sqrt(t**2/2):t;s&&(C-=h),i&&(C+=h),n&&(q-=h),e&&(q+=h),Q=q,j=C}else{let h=Q-q,s=j-C;const i=Math.sqrt(h**2+s**2);i<t?(q=Q,C=j):(q+=h/i*t,C+=s/i*t)}q-Math.floor(P/2)<0?q=Math.floor(P/2):q+Math.floor(P/2)>H&&(q=H-Math.floor(P/2)),C-Math.floor(T/2)<0?C=Math.floor(T/2):C+Math.floor(T/2)>F&&(C=F-Math.floor(T/2)),R=[q,C,P,T,X]}const s=L.getContext("2d");let i;s.fillStyle="#000",s.fillRect(0,0,H,F),s.fillStyle="#777";for(let h=100;h--;s.beginPath(),s.arc(Math.floor(-60*(100-h)*(q-P/2)/(100*(H-P)))+102797*(1+Math.sin(i))*h%540,F*(Math.tan(h/9)+i*(t-rt)/3e3)%F,2*i,0,7),s.fill())i=149/(3*h+199);const n=Z,e=[],a=[],o=[];function c(h){const i=h.Bt(Nt,s,t-rt);"boolean"==typeof i?i&&(h.Ft?a.push(h):e.push(h),h.Ct&&o.push(h)):Array.isArray(i)&&i.forEach((t=>{h===t?i&&(h.Ft?a.push(h):e.push(h),h.Ct&&o.push(h)):c(t)}))}if(Dt.forEach(c),!n&&Z&&(E=t-rt,z.map((h=>(g(h,P,T),new Bt(h,q-Math.floor(P/2),C-Math.floor(T/2),1500,t-rt)))).forEach(c)),Dt=e.concat(a),Nt=o,s.fillStyle="#fff",s.textAlign="center",Z)s.save(),s.globalAlpha=Math.min(1,(t-rt-E)/2e3),s.textBaseline="middle",s.font="40px Helvetica",s.fillText("Game Over",B,O),s.restore();else{if(W){const t=$[Math.min(W-1,$.length-1)];s.drawImage(t,q-Math.floor(t.width/2),C-Math.floor(t.height/2)+5)}s.drawImage(Y,q-Math.floor(P/2),C-Math.floor(T/2))}V>t-rt&&(s.save(),s.globalAlpha=(V-t+rt)/1e3,s.fillStyle="#fff",s.fillRect(0,0,H,F),s.restore()),s.textBaseline="top",s.font="16px Helvetica",s.fillText(ct,B,5);const r=J>t-rt;if(!Z&&It+(r?100:200)<t-rt&&(zt=-zt,Dt.push(new Ft(q+(r?zt:0),C-Math.floor(T/2),t-rt)),It=Math.max(t-rt)),jt<t-rt&&!Lt&&(at++,at%5?jt=t-rt+1e4:(Lt=!0,Dt.push(new St(Math.floor(at/5),t-rt)))),Gt<t-rt&&!Lt&&(Dt.push(new Ht(At.v(30,450),Math.floor(-nt.height/2),Ut,t-rt)),Ut=(Ut+1)%kt.length,Gt=t-rt+9e3),Qt<t-rt&&!Lt){const h=Kt.v(Math.min(Math.max(at-2,0),_.length-3),Math.min(at,_.length-1)),[s,i,n,e,a,o,c,r]=_[h];Dt.push(new Ct(s,i,n,e,Kt.v(30,450),Math.floor(-s.height/2),o,a,50*(h+1),c,r,t-rt)),mt()}Z&&E+3500<t-rt&&(function(){if(ot){const t=[ot,Date.now()];ft.push(t),ft.sort(((t,h)=>{const s=h[0]-t[0];return 0===s?h[1]-t[1]:s})),ft.length=Math.min(ft.length,5),ut=ft.indexOf(t),self.localStorage.pnf_highscores=JSON.stringify(ft)}}(),Mt=1,D=S)}(h)}U=!1})(s),requestAnimationFrame(h)}))};let Pt=t=>{let h,s,i,n;L.offsetWidth/L.offsetHeight>.6857142857142857?(s=0,n=L.offsetHeight,i=n*H/F,h=Math.floor(L.offsetWidth-i)/2):(h=0,i=L.offsetWidth,n=i*F/H,s=Math.floor(L.offsetHeight-n)/2);let e={};return e=t.changedTouches?t.changedTouches[0]:t,[Math.floor((e.pageX-h)*H/i),Math.floor((e.pageY-s)*F/n)]};self.ontouchstart=self.onpointerdown=t=>{t.preventDefault(),S=!0,[N,I]=Pt(t),Q=N,j=I},self.ontouchmove=self.onpointermove=t=>{t.preventDefault(),[Q,j]=Pt(t)},self.ontouchend=self.onpointerup=t=>{t.preventDefault(),S=!1,[K,A]=Pt(t)},self.onkeydown=t=>{U=!0,G[t.code]=1,t.preventDefault()},self.onkeyup=t=>{G[t.code]=0,t.preventDefault()}}();
