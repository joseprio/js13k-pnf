<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="mobile-web-app-capable" content="yes"><style>#a,body,html{width:100%;height:100%;margin:0;padding:0;touch-action:none;user-select:none;object-fit:contain}body{background:#226;overflow:hidden;display:flex;align-items:center;justify-content:center}</style><title>Planet Not Found</title></head><body><canvas id="a"></canvas><script>!function(){"use strict";class t{constructor(t){this.seedPosition=0,this.arrayPosition=0,this.hrCache={},this.seed=t,this.seed.length<8&&(this.seed="padding_"+this.seed),this.seed.length%2==0&&(this.seed="1"+this.seed),this.stateArray=[2972948403,3086140710,2071788248,3026137486,1411764137,2265725585,2923087685,1593177610],this.state=3234042090;for(var e=this.seed.length-1;e>=0;e--){var h=this.seed.charCodeAt(e);this.state=((this.state<<5)+this.state^h^this.state<<h%13+1^this.state>>h%17+1)>>>0,this.stateArray[e%8]^=((this.state>>9)*(this.state%16384+3427)^h)>>>0}}sr(){var t=this.seed.charCodeAt(this.seedPosition),e=this.stateArray[this.arrayPosition];return this.state=((this.state<<5)+this.state+e^t^this.state<<t%17+1^this.state>>t%13+1)>>>0,this.stateArray[this.arrayPosition]=(e>>3^e<<t%19+1^this.state%134217728*3427)>>>0,this.seedPosition=(this.seedPosition+1)%this.seed.length,this.arrayPosition=(this.arrayPosition+1)%8,this.state}hr(t){const e=[1160605769,1424711319,876532818,1419174464];let h=1206170165;if(null==t&&(t="?/?/?/",h=3379896793),this.hrCache.hasOwnProperty(t))return this.hrCache[t];for(var s=t.length-1;s>=0;s--){const i=t.charCodeAt(s);let o=e[0]^i;o=(o^o<<11)>>>0,o=(o^o>>8)>>>0,e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=(e[3]^e[3]>>19^o)>>>0,h=3427*(h^i<<24)^e[3]}for(var i=this.seed.length-1;i>=0;i--){const t=this.seed.charCodeAt(i);let s=e[0]^t;s=(s^s<<11)>>>0,s=(s^s>>8)>>>0,e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=(e[3]^e[3]>>19^s)>>>0,h=3427*(h^t<<24)^e[3]}return this.hrCache[t]=h>>>0,this.hrCache[t]}sd(t,e){return(4294967296*this.sr()+this.sr())/0x10000000000000000*(e-t)+t}hd(t,e,h){return(4294967296*this.hr(h)+this.hr(h+"@"))/0x10000000000000000*(e-t)+t}si(t,e){return Math.floor((4294967296*this.sr()+this.sr())/0x10000000000000000*(e+1-t)+t)}hi(t,e,h){return Math.floor((4294967296*this.hr(h)+this.hr(h+"@"))/0x10000000000000000*(e+1-t)+t)}sb(t){return(4294967296*this.sr()+this.sr())/0x10000000000000000<t}hb(t,e){return(4294967296*this.hr(e)+this.hr(e+"@"))/0x10000000000000000<t}ss(t){return(4294967296*this.sr()+this.sr())/0x10000000000000000<t?-1:1}sseq(t,e){for(var h=0;(4294967296*this.sr()+this.sr())/0x10000000000000000<t&&h<e;)h++;return h}hseq(t,e,h){for(var s=0;(4294967296*this.hr(h+s)+this.hr(h+"@"+s))/0x10000000000000000<t&&s<e;)s++;return s}schoose(t){let e=0;for(let h=0;h<t.length;h++)e+=t[h];let h=this.sd(0,e);for(let e=0;e<t.length;e++)if(h-=t[e],h<0)return e;return 0}hchoose(t,e){let h=0;for(let e=0;e<t.length;e++)h+=t[e];let s=this.hd(0,h,e);for(let e=0;e<t.length;e++)if(s-=t[e],s<0)return e;return 0}}function e(t,e,h){return Math.max(e,Math.min(h,t))}function h(t,e){for(var h=Math.floor(t).toString(16);h.length<e;)h="0"+h;return h}function s(t){return"#"+h(Math.floor(255*e(t[0],0,1)),2)+(h(Math.floor(255*e(t[1],0,1)),2)+h(Math.floor(255*e(t[2],0,1)),2))}function i(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function o(t){var e=t[1]*t[2],h=t[2]-e,s=6*((t[0]%1+1)%1),i=Math.floor(s),o=e*(1-Math.abs(s%2-1));switch(i){case 0:return[e+h,o+h,h];case 1:return[o+h,e+h,h];case 2:return[h,e+h,o+h];case 3:return[h,o+h,e+h];case 4:return[o+h,h,e+h];default:return[e+h,h,o+h]}}class r{constructor(e){this.componentChances=[],this.colors=[],this.colorChances=[],this.seed=e,this.r=new t(this.seed),this.setupComponentChances(),this.setupColors()}setupComponentChances(){this.componentChances=[];this.componentChances[0]=.8*this.r.sd(.001,1)*Math.pow(2,this.r.sd(0,8)),this.componentChances[1]=.9*this.r.sd(.01,1)*Math.pow(2,this.r.sd(0,8)),this.componentChances[2]=1*this.r.sd(.001,1)*Math.pow(2,this.r.sd(0,8)),this.componentChances[3]=3*this.r.sd(0,1)*Math.pow(2,this.r.sd(0,8)),this.componentChances[4]=.5*this.r.sd(0,1)*Math.pow(2,this.r.sd(0,8)),this.componentChances[5]=.05*this.r.sd(0,1)*Math.pow(2,this.r.sd(0,8)),this.componentChances[6]=.5*this.r.sd(0,1)*Math.pow(2,this.r.sd(0,8))}setupColors(){const t=1+(this.r.hb(.7,"base color +1")?1:0)+this.r.hseq(.3,3,"base color count");for(let h=0;h<t;h++){const t="base color"+h;this.colors.push(o([Math.pow(this.r.hd(0,1,t+"hue"),2),e(this.r.hd(-.2,1,t+"saturation"),0,Math.pow(this.r.hd(0,1,t+"saturation bound"),4)),e(this.r.hd(.7,1.1,t+"value"),0,1)])),this.colorChances.push(Math.pow(2,this.r.hd(0,6,t+"chances")))}}getBaseColor(t){let h=this.colors[t.r.schoose(this.colorChances)];return t.r.sb(Math.pow(this.r.hd(0,.5,"base color shift chance"),2))&&(h=[h[0],h[1],h[2]],h[0]=e(h[0]+Math.pow(this.r.hd(0,.6,"base color shift range red"),2)*e(t.r.sd(-1,1.2),0,1)*e(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1),h[1]=e(h[1]+Math.pow(this.r.hd(0,.6,"base color shift range green"),2)*e(t.r.sd(-1,1.2),0,1)*e(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1),h[2]=e(h[2]+Math.pow(this.r.hd(0,.6,"base color shift range blue"),2)*e(t.r.sd(-1,1.2),0,1)*e(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1)),h}}function a(t,e){return 1-e[1]/t.h}function n(t,e,h,s){let i=1;return h&&(i=Math.min(i,1-Math.abs(e[0]-t.hw)/t.hw)),s&&(i=Math.min(i,1-Math.abs(e[1]-t.hh)/t.hh)),i}function l(t,e){return n(t,e,!0,!0)*(1-1/((t.w+t.h)/1e3+1))*Math.pow(t.f.r.hd(0,1,"master bigness"),.5)*(1-t.getpcdone())}function c(t,e){return[Math.min(e[0][0]-0,t.w-0-e[1][0]),Math.min(e[0][1]-0,t.h-0-e[1][1])]}function f(t,h,s,i){const o=t.createLinearGradient(s[0],s[1],2*h[0]-s[0],2*h[1]-s[1]),r=`rgba(0,0,0,${e(i,0,1)})`;return o.addColorStop(0,r),o.addColorStop(.5,"rgba(0,0,0,0)"),o.addColorStop(1,r),o}const d=[];d[0]=function(t,h){let o=8;const r=Math.pow(l(t,h),.3);if(t.r.sb(t.f.r.hd(0,.9,"com0 bigchance")*r)){const e=t.f.r.hd(0,.5,"com0 bigincchance");for(;t.r.sb(e*r);){const e=c(t,[[h[0]-o,h[1]-o],[h[0]+o,h[1]+o]]);if(!(Math.min(e[0],e[1])>.5*o))break;o*=1.5}}const a=2*o,n=[Math.ceil(t.r.sd(1,Math.max(2,.5*o))),Math.ceil(t.r.sd(1,Math.max(2,.5*o)))],d=Math.min(n[0],n[1])*t.r.sd(.1,1.2),g=[n[0]+2*d,n[1]+2*d],u=[Math.ceil(a/g[0]),Math.ceil(a/g[1])],x=[Math.round(u[0]*g[0]/2),Math.round(u[1]*g[1]/2)],M=t.getpcdone(),m=t.f.getBaseColor(t),p=s(i(m,t.r.sd(.4,1))),w=s(i(m,t.r.sd(.4,1)));t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(h[0]-x[0]-1,h[1]-x[1]-1,g[0]*u[0]+2,g[1]*u[1]+2),t.cfx.fillStyle=w,t.cfx.fillRect(h[0]-x[0],h[1]-x[1],g[0]*u[0],g[1]*u[1]),t.cfx.fillStyle=p;for(let e=0;e<u[0];e++){const s=h[0]+d+e*g[0]-x[0];for(let e=0;e<u[1];e++){const i=h[1]+d+e*g[1]-x[1];t.cfx.fillRect(s,i,n[0],n[1])}}t.r.sb(e(o/8*(.6*M+.3),0,.98))&&(t.cfx.fillStyle=f(t.cfx,h,[h[0]+x[0],h[1]],t.r.sd(0,.9)),t.cfx.fillRect(h[0]-x[0],h[1]-x[1],g[0]*u[0],g[1]*u[1]))},d[1]=function(t,h){let o=8;const r=Math.pow(l(t,h),.2);if(t.r.sb(t.f.r.hd(.3,1,"com1 bigchance")*r)){const e=t.f.r.hd(0,.6,"com1 bigincchance");for(;t.r.sb(e*r);){const e=c(t,[[h[0]-o,h[1]-o],[h[0]+o,h[1]+o]]);if(!(Math.min(e[0],e[1])>.5*o))break;o*=1.5}}let a=Math.ceil(t.r.sd(.8,2)*o);const n=Math.ceil(t.r.sd(.8,2)*o),d=t.r.si(3,Math.max(4,a)),g=Math.max(1,Math.round(a/d));a=g*d;const u=s(i(t.f.getBaseColor(t),t.r.sd(.5,1))),x=t.r.sd(.3,.9);if(t.r.sb(e(t.f.r.hd(-.2,1.2,"com1 hchance"),0,1))){const e=[h[0]-Math.floor(a/2),h[1]-Math.floor(n/2)];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(e[0]-1,e[1]-1,a+2,n+2),t.cfx.fillStyle=u,t.cfx.fillRect(e[0],e[1],a,n);for(let s=0;s<g;s++)t.cfx.fillStyle=f(t.cfx,[e[0]+(s+.5)*d,h[1]],[e[0]+s*d,h[1]],x),t.cfx.fillRect(e[0]+s*d,e[1],d,n)}else{const e=[h[0]-Math.floor(n/2),h[1]-Math.floor(a/2)];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(e[0]-1,e[1]-1,n+2,a+2),t.cfx.fillStyle=u,t.cfx.fillRect(e[0],e[1],n,a);for(let s=0;s<g;s++)t.cfx.fillStyle=f(t.cfx,[h[0],e[1]+(s+.5)*d],[h[0],e[1]+s*d],x),t.cfx.fillRect(e[0],e[1]+s*d,a,d)}},d[2]=function(t,h){let o=8;const r=Math.pow(l(t,h),.05);if(t.r.sb(t.f.r.hd(0,1,"com2 bigchance")*r)){const e=t.f.r.hd(0,.9,"com2 bigincchance");for(;t.r.sb(e*r);){const e=c(t,[[h[0]-o,h[1]-o],[h[0]+o,h[1]+o]]);if(!(Math.min(e[0],e[1])>.5*o))break;o*=1.5}}const a=Math.ceil(t.r.sd(.6,1.4)*o),n=Math.ceil(t.r.sd(1,2)*o),f=[Math.ceil(e(a*t.r.sd(.7,1)/2,1,a)),Math.ceil(e(a*t.r.sd(.8,1)/2,1,a))],d=[Math.floor(e(a*t.r.sd(.05,.25),1,n)),Math.floor(e(a*t.r.sd(.1,.3),1,n))],g=d[0]+d[1],u=t.r.sb(Math.pow(t.f.r.hd(0,1,"com2 oddchance"),.5)),x=e(Math.floor(n/g),1,n),M=x*g+(u?d[0]:0),m=t.f.getBaseColor(t),p=[i(m,t.r.sd(.6,1)),i(m,t.r.sd(.6,1))],w=1-t.r.sd(.5,.95),y=[i(p[0],w),i(p[1],w)];if(t.r.sb(Math.pow(t.f.r.hd(0,1,"com2 verticalchance"),.1))){const e=[t.cfx.createLinearGradient(h[0]-f[0],h[1],h[0]+f[0],h[1]),t.cfx.createLinearGradient(h[0]-f[1],h[1],h[0]+f[1],h[1])];e[0].addColorStop(0,s(y[0])),e[0].addColorStop(.5,s(p[0])),e[0].addColorStop(1,s(y[0])),e[1].addColorStop(0,s(y[1])),e[1].addColorStop(.5,s(p[1])),e[1].addColorStop(1,s(y[1]));const i=Math.floor(h[1]-M/2);for(let s=0;s<x;s++)t.cfx.fillStyle=e[0],t.cfx.fillRect(h[0]-f[0],i+s*g,2*f[0],d[0]),t.cfx.fillStyle=e[1],t.cfx.fillRect(h[0]-f[1],i+s*g+d[0],2*f[1],d[1]);u&&(t.cfx.fillStyle=e[0],t.cfx.fillRect(h[0]-f[0],i+x*g,2*f[0],d[0]))}else{const e=[t.cfx.createLinearGradient(h[0],h[1]-f[0],h[0],h[1]+f[0]),t.cfx.createLinearGradient(h[0],h[1]-f[1],h[0],h[1]+f[1])];e[0].addColorStop(0,s(y[0])),e[0].addColorStop(.5,s(p[0])),e[0].addColorStop(1,s(y[0])),e[1].addColorStop(0,s(y[1])),e[1].addColorStop(.5,s(p[1])),e[1].addColorStop(1,s(y[1]));const i=Math.floor(h[0]-M/2);for(let s=0;s<x;s++)t.cfx.fillStyle=e[0],t.cfx.fillRect(i+s*g,h[1]-f[0],d[0],2*f[0]),t.cfx.fillStyle=e[1],t.cfx.fillRect(i+s*g+d[0],h[1]-f[1],d[1],2*f[1]);u&&(t.cfx.fillStyle=e[0],t.cfx.fillRect(i+x*g,h[1]-f[0],d[0],2*f[0]))}},d[3]=function(t,e){if(t.r.sb(a(t,e)-.3)||t.getcellstate(e[0],e[1]+6*1.2)>0||t.getcellstate(e[0],e[1]+10.8)>0)for(let h=0;h<100;h++){const h=t.r.schoose(t.f.componentChances);if(3!=h)return void d[h](t,e)}let h=8;const o=Math.pow(l(t,e),.1);if(t.r.sb(t.f.r.hd(.6,1,"com3 bigchance")*o)){const s=t.f.r.hd(.3,.8,"com3 bigincchance");for(;t.r.sb(s*o);){const s=c(t,[[e[0]-h,e[1]-h],[e[0]+h,e[1]+h]]);if(!(Math.min(s[0],s[1])>.5*h))break;h*=1.5}}const r=t.r.sd(1,2)*h;let n=Math.ceil(t.r.sd(.3,1)*h);const f=r*t.r.sd(.25,.6),g=(r+f)/2/2,u=[Math.max(1,Math.ceil(n*t.r.sd(.08,.25))),Math.max(1,Math.ceil(n*t.r.sd(.03,.15)))],x=u[0]+u[1],M=Math.ceil(n/x);n=M*x+u[0],t.f.setupColors();const m=t.f.colors[t.f.r.hchoose(t.f.colorChances,"com3 basecolor")],p=t.f.r.hd(.5,.8,"com3 lightness0 mid"),w=p-t.f.r.hd(.2,.4,"com3 lightness0 edge"),y=t.f.r.hd(0,.2,"com3 lightness1 edge"),b=[t.cfx.createLinearGradient(e[0]-g,e[1],e[0]+g,e[1]),t.cfx.createLinearGradient(e[0]-g,e[1],e[0]+g,e[1])];b[0].addColorStop(0,s(i(m,w))),b[0].addColorStop(.5,s(i(m,p))),b[0].addColorStop(1,s(i(m,w))),b[1].addColorStop(0,s(i(m,y))),b[1].addColorStop(.5,s(m)),b[1].addColorStop(1,s(i(m,y)));const C=Math.ceil(e[1]-n/2);t.cfx.fillStyle=b[0],t.cfx.beginPath(),t.cfx.moveTo(e[0]-f/2,C),t.cfx.lineTo(e[0]+f/2,C),t.cfx.lineTo(e[0]+r/2,C+n),t.cfx.lineTo(e[0]-r/2,C+n),t.cfx.fill(),t.cfx.fillStyle=b[1];const S=[C+u[0],C+x];for(let h=0;h<M;h++){const s=[h*x+u[0],(h+1)*x],i=[S[0]+h*x,S[1]+h*x],o=[(f+(r-f)*(s[0]/n))/2,(f+(r-f)*(s[1]/n))/2];t.cfx.beginPath(),t.cfx.moveTo(e[0]-o[0],i[0]),t.cfx.lineTo(e[0]+o[0],i[0]),t.cfx.lineTo(e[0]+o[1],i[1]),t.cfx.lineTo(e[0]-o[1],i[1]),t.cfx.fill()}},d[4]=function(t,e){const h=n(t,e,!0,!1),o=t.r.sd(.7,1),r=t.r.sd(0,.2),a=t.f.getBaseColor(t),l=s(i(a,o)),c=s(i(a,r)),f=Math.max(3,Math.ceil(t.size*Math.pow(t.r.sd(.4,1),2)*t.f.r.hd(.02,.1,"com4 maxwidth"))),g=Math.floor(f/2),u=f%2,x=1*Math.pow(t.f.r.hd(0,1,"com4 directionc0"),4),M=.1*Math.pow(t.f.r.hd(0,1,"com4 directionc1"),4),m=.2*Math.pow(t.f.r.hd(0,1,"com4 directionc2"),4),p=t.r.schoose([x*(2-h),M,m*(1+h)]);let w=null;if(0==p){const h=e[1]-0,s=Math.min(Math.max(8,h-t.r.si(0,16)),Math.floor(.7*t.size*Math.pow(t.r.sd(0,1),t.f.r.hd(2,6,"com4 hpower0")))),i=[[e[0]-g,e[1]-s],[e[0]+g+u,e[1]]],o=t.cfx.createLinearGradient(i[0][0],i[0][1],i[1][0],i[0][1]);o.addColorStop(0,c),o.addColorStop(.5,l),o.addColorStop(1,c),t.cfx.fillStyle=o,t.cfx.fillRect(i[0][0],i[0][1],f,s),w=[e[0],e[1]-s]}else if(1==p){const h=t.h-(0+e[1]),s=Math.min(Math.max(8,h-t.r.si(0,16)),Math.floor(.6*t.size*Math.pow(t.r.sd(0,1),t.f.r.hd(2,7,"com4 hpower1")))),i=[[e[0]-g,e[1]],[e[0]+g+u,e[1]+s]],o=t.cfx.createLinearGradient(i[0][0],i[0][1],i[1][0],i[0][1]);o.addColorStop(0,c),o.addColorStop(.5,l),o.addColorStop(1,c),t.cfx.fillStyle=o,t.cfx.fillRect(i[0][0],i[0][1],f,s),w=[e[0],e[1]+s]}else if(2==p){const h=t.cfx.createLinearGradient(e[0],e[1]-g,e[0],e[1]+g+u);h.addColorStop(0,c),h.addColorStop(.5,l),h.addColorStop(1,c),t.cfx.fillStyle=h,t.cfx.fillRect(e[0],e[1]-g,Math.ceil(t.hw-e[0])+1,f),w=[Math.floor(t.hw),e[1]]}const y=[.6*Math.pow(t.f.r.hd(0,1,"com4 covercomc0"),2),.2*Math.pow(t.f.r.hd(0,1,"com4 covercomc1"),2),1*Math.pow(t.f.r.hd(0,1,"com4 covercomc2"),2)];if(d[t.r.schoose(y)](t,e),t.getcellstate(w[0],w[1])>0){const e=[w[0]+Math.round(6*t.r.sd(-1,1)),w[1]+Math.round(6*t.r.sd(-1,1))];t.getcellstate(e[0],e[1])>0?d[t.r.schoose(y)](t,e):d[t.r.schoose(y)](t,w)}},d[5]=function(t,e){let h=8;const o=Math.pow(l(t,e),.1);if(t.r.sb(t.f.r.hd(0,.9,"com5 bigchance")*o)){const s=t.f.r.hd(0,.8,"com5 bigincchance");for(;t.r.sb(s*o);){const s=c(t,[[e[0]-h,e[1]-h],[e[0]+h,e[1]+h]]);if(!(Math.min(s[0],s[1])>.5*h))break;h*=1.5}}const r=t.r.sd(.75,1),a=t.r.sd(0,.25),n=t.f.getBaseColor(t),f=s(i(n,r)),d=s(i(n,a)),g=1+t.r.sseq(t.f.r.hd(0,1,"com5 multxc"),Math.floor(1.2*Math.pow(h/8,.6))),u=1+t.r.sseq(t.f.r.hd(0,1,"com5 multyc"),Math.floor(1.2*Math.pow(h/8,.6))),x=t.r.sd(.5,1)*h/Math.max(g,u),M=x+.5,m=x+1,p=.2*x,w=x*g,y=x*u,b=[e[0]-w,e[1]-y];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.2)+")";for(let e=0;e<g;e++){const h=b[0]+(2*e+1)*x;for(let e=0;e<u;e++){const s=b[1]+(2*e+1)*x;t.cfx.beginPath(),t.cfx.arc(h,s,m,0,2*Math.PI),t.cfx.fill()}}for(let e=0;e<g;e++){const h=b[0]+(2*e+1)*x;for(let e=0;e<u;e++){const s=b[1]+(2*e+1)*x,i=t.cfx.createRadialGradient(h,s,p,h,s,M);i.addColorStop(0,f),i.addColorStop(1,d),t.cfx.fillStyle=i,t.cfx.beginPath(),t.cfx.arc(h,s,M,0,2*Math.PI),t.cfx.fill()}}},d[6]=function(t,e){if(t.nextpass<=0||t.r.sb(a(t,e)))return void d[t.r.schoose(function(t,e,h){const s=new Array(h-e);for(let i=h;i>=e;i--)s[i-e]=t[i];return s}(t.f.componentChances,0,5))](t,e);let h=8;const o=Math.pow(l(t,e),.05);if(t.r.sb(t.f.r.hd(0,.9,"com6 bigchance")*o)){const s=t.f.r.hd(0,.8,"com6 bigincchance");for(;t.r.sb(s*o);){const s=c(t,[[e[0]-h,e[1]-h],[e[0]+h,e[1]+h]]);if(!(Math.min(s[0],s[1])>.5*h))break;h*=1.5}}const r=Math.ceil(2*h*t.r.sd(.6,1)),n=Math.floor(r/2),f=r%2,g=r*Math.pow(t.r.sd(Math.pow(t.f.r.hd(0,.8,"com6 h1min"),.5),.9),t.f.r.hd(.5,1.5,"com6 h1power")),u=Math.floor(g/2),x=r%2,M=Math.max(0-(r-g)/2,r*(t.r.sd(0,.45)+t.r.sd(0,.45))*(t.f.r.hb(.8,"com6 backnesstype")?t.f.r.hd(.2,.9,"com6 backness#pos"):t.f.r.hd(-.2,-.05,"com6 backness#neg"))),m=Math.ceil(h*t.r.sd(.7,1)*Math.pow(t.f.r.hd(.1,3.5,"com6 width"),.5)),p=Math.floor(m/2),w=m%2,y=[[e[0]-p,e[1]+M-u],[e[0]+p+w,e[1]-n],[e[0]+p+w,e[1]+n+f],[e[0]-p,e[1]+M+u+x]],b=t.f.getBaseColor(t);t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.2)+")",t.cfx.beginPath(),t.cfx.moveTo(y[0][0]-1,y[0][1]),t.cfx.lineTo(y[1][0]-1,y[1][1]),t.cfx.lineTo(y[2][0]-1,y[2][1]),t.cfx.lineTo(y[3][0]-1,y[3][1]),t.cfx.fill(),t.cfx.fillStyle=s(i(b,t.r.sd(.7,1))),t.cfx.beginPath(),t.cfx.moveTo(y[0][0],y[0][1]),t.cfx.lineTo(y[1][0],y[1][1]),t.cfx.lineTo(y[2][0],y[2][1]),t.cfx.lineTo(y[3][0],y[3][1]),t.cfx.fill()};const g=[];g[0]=function(t){const h=.05*((t.w-0)*(t.h-0)),s=Math.ceil((t.w-0)*t.f.r.hd(.1,1,"outline0 iw")*.2),i=[[[t.hw-s,0],[t.hw+s,t.h-0]]],o=2+Math.floor(t.r.sd(.5,1)*t.f.r.hd(2,8,"outline0 bc")*Math.sqrt(t.size));for(let s=1;s<o;s++){const s=i[t.r.si(0,i.length-1)],o=[s[0][0]+t.r.sd(0,1)*(s[1][0]-s[0][0]),s[0][1]+t.r.sd(0,1)*(s[1][1]-s[0][1])];o[1]<.5*(s[0][1]+s[1][1])&&t.r.sb(t.f.r.hd(.5,1.5,"outline0 frontbias"))&&(o[1]=s[1][1]-(o[1]-s[0][1]));const r=[e(t.r.sd(0,1)*t.w,0,t.w-0),e(t.r.sd(0,1)*t.h,0,t.h-0)],a=h/Math.abs((r[0]-o[0])*(r[1]-o[1]));if(a<1&&(r[0]=o[0]+(r[0]-o[0])*a,r[1]=o[1]+(r[1]-o[1])*a),o[0]>r[0]){const t=o[0];o[0]=r[0],r[0]=t}if(o[1]>r[1]){const t=o[1];o[1]=r[1],r[1]=t}i.push([[Math.floor(o[0]),Math.floor(o[1])],[Math.ceil(r[0]),Math.ceil(r[1])]])}t.csx.fillStyle="#FFFFFF";for(let e=0;e<i.length;e++){const h=i[e];t.csx.fillRect(h[0][0],h[0][1],h[1][0]-h[0][0],h[1][1]-h[0][1]),t.csx.fillRect(t.w-h[1][0],h[0][1],h[1][0]-h[0][0],h[1][1]-h[0][1])}},g[1]=function(t){const e=.05*((t.w-0)*(t.h-0)),h=Math.max(2,Math.sqrt(e/Math.PI)),s=Math.ceil((t.w-0)*t.f.r.hd(.1,1,"outline1 iw")*.2),i=[],o=Math.floor((t.h-0)/(2*s));for(let e=0;e<o;e++){let h=[t.hw,t.h-(0+s*(2*e+1))];i.push({v:h,r:s})}const r=o+Math.floor(t.r.sd(.5,1)*t.f.r.hd(10,50,"outline1 cc")*Math.sqrt(t.size));for(let e=o;e<r;e++){const e=i[Math.max(t.r.si(0,i.length-1),t.r.si(0,i.length-1))];let s=t.r.sd(1,h);const o=t.r.sd(Math.max(0,e.r-s),e.r);let r=t.r.sd(0,2*Math.PI);r>Math.PI&&t.r.sb(t.f.r.hd(.5,1.5,"outline1 frontbias"))&&(r=t.r.sd(0,Math.PI));let a=[e.v[0]+Math.cos(r)*o,e.v[1]+Math.sin(r)*o];s=Math.min(s,a[0]-0),s=Math.min(s,t.w-0-a[0]),s=Math.min(s,a[1]-0),s=Math.min(s,t.h-0-a[1]),i.push({v:a,r:s})}t.csx.fillStyle="#fff";for(let e=0;e<i.length;e++){const h=i[e];t.csx.beginPath(),t.csx.arc(h.v[0],h.v[1],h.r,0,2*Math.PI),t.csx.fill(),t.csx.beginPath(),t.csx.arc(t.w-h.v[0],h.v[1],h.r,0,2*Math.PI),t.csx.fill()}},g[2]=function(t){const e=[t.w-0,t.h-0],h=[[t.hw,t.r.sd(0,.05)*e[1]+0],[t.hw,t.r.sd(.95,1)*e[1]+0]],s=6/t.size+t.f.r.hd(.03,.1,"outline2 basefatness"),i=1/s,o=Math.max(3,Math.ceil(i*t.r.sd(.05,.1)*Math.sqrt(t.size)));t.csx.lineCap=["round","square"][t.f.r.hi(0,1,"outline2 linecap")],t.csx.strokeStyle="#fff";for(let i=1;i<o;i++){let o=h[i];null==o&&(o=[t.r.sd(0,1)*e[0]+0,Math.pow(t.r.sd(0,1),t.f.r.hd(.1,1,"outline2 frontbias"))*e[1]+0],h.push(o));const r=1+t.r.sseq(t.f.r.hd(0,1,"outline2 conadjust"),3);for(let e=0;e<r;e++){const e=h[t.r.si(0,h.length-2)];t.csx.lineWidth=t.r.sd(.7,1)*s*t.size,t.csx.beginPath(),t.csx.moveTo(e[0],e[1]),t.csx.lineTo(o[0],o[1]),t.csx.stroke(),t.csx.beginPath(),t.csx.moveTo(t.w-e[0],e[1]),t.csx.lineTo(t.w-o[0],o[1]),t.csx.stroke()}}};class u{constructor(e,h,s){this.extradone=0,this.nextpass=0,this.nextcell=0,this.totaldone=0,this.f=e,this.baseSeed=h,this.seed=this.f.seed+this.baseSeed,this.r=new t(this.seed),this.size=null==s?this.r.sd(this.f.r.hd(2.5,3.5,"size min"),this.f.r.hd(5,7,"size max"))**3:s;const i=this.r.sd(this.f.r.hd(.5,1,"wratio min"),this.f.r.hd(1,1.3,"wratio max")),o=this.r.sd(this.f.r.hd(.7,1,"hratio min"),this.f.r.hd(1.1,1.7,"hratio max"));this.w=Math.floor(this.size*i)+0,this.hw=Math.floor(this.w/2),this.gw=Math.floor((this.w-0)/6),this.gwextra=.5*(this.w-6*this.gw),this.h=Math.floor(this.size*o)+0,this.hh=Math.floor(this.h/2),this.gh=Math.floor((this.h-0)/6),this.ghextra=.5*(this.h-6*this.gh),this.cs=document.createElement("canvas"),this.cs.setAttribute("width",String(this.w)),this.cs.setAttribute("height",String(this.h)),this.csx=this.cs.getContext("2d"),this.cf=document.createElement("canvas"),this.cf.setAttribute("width",String(this.w)),this.cf.setAttribute("height",String(this.h)),this.cfx=this.cf.getContext("2d"),g[this.f.r.hchoose([1,1,1],"outline type")](this),this.csd=this.csx.getImageData(0,0,this.w,this.h),this.cgrid=[];for(let t=0;t<this.gw;t++){this.cgrid[t]=[];for(let e=0;e<this.gh;e++)this.cgrid[t][e]={gx:t,gy:e,x:Math.floor(this.gwextra+6*(t+.5)),y:Math.floor(this.ghextra+6*(e+.5)),state:0}}this.goodcells=[this.cgrid[Math.floor(this.gw/2)][Math.floor(this.gh/2)]];let r=0;for(;r<this.goodcells.length;){const t=this.goodcells[r];if(t.gx>0){const e=this.cgrid[t.gx-1][t.gy];0==e.state&&(this.getspa(e.x,e.y)>0?(e.state=1,this.goodcells.push(e)):e.state=-1)}if(t.gx<this.gw-1){const e=this.cgrid[t.gx+1][t.gy];0==e.state&&(this.getspa(e.x,e.y)>0?(e.state=1,this.goodcells.push(e)):e.state=-1)}if(t.gy>0){const e=this.cgrid[t.gx][t.gy-1];0==e.state&&(this.getspa(e.x,e.y)>0?(e.state=1,this.goodcells.push(e)):e.state=-1)}if(t.gy<this.gh-1){const e=this.cgrid[t.gx][t.gy+1];0==e.state&&(this.getspa(e.x,e.y)>0?(e.state=1,this.goodcells.push(e)):e.state=-1)}r++}for(let t=0;t<this.goodcells.length;t++){const e=this.goodcells[t],h=this.cgrid[this.gw-1-e.gx][e.gy];1!=h.state&&(h.state=1,this.goodcells.push(h))}this.passes=this.f.r.hi(1,2,"base component passes"),this.extra=Math.max(1,Math.floor(this.goodcells.length*this.f.r.hd(0,1/this.passes,"extra component amount"))),this.totalcomponents=this.passes*this.goodcells.length+this.extra}getcell(t,e){const h=Math.floor((t-this.gwextra)/6),s=Math.floor((e-this.ghextra)/6);return h<0||h>=this.gw||s<0||s>=this.gh?null:this.cgrid[h][s]}getcellstate(t,e){const h=this.getcell(t,e);return null==h?0:h.state}getspa(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>this.w||e<0||e>this.h?-1:this.csd.data[4*(e*this.w+t)+3]}getpcdone(){return this.totaldone/this.totalcomponents}addcomponent(){let t;if(this.nextpass<this.passes)this.nextcell<this.goodcells.length?(t=this.goodcells[this.nextcell],this.nextcell++):(this.nextpass++,t=this.goodcells[0],this.nextcell=1);else{if(!(this.extradone<this.extra))return!0;t=this.goodcells[this.r.si(0,this.goodcells.length-1)],this.extradone++}let e=[t.x,t.y];for(let h=0;h<10;h++){const h=[t.x+this.r.si(-6,6),t.y+this.r.si(-6,6)];if(!(h[0]<0||h[0]>this.w-0||h[1]<0||h[1]>this.h-0)&&!(this.getspa(h[0],h[1])<=0)){e=h;break}}return Math.abs(e[0]-this.hw)<6&&this.r.sb(this.f.r.hd(0,1,"com middleness"))&&(e[0]=Math.floor(this.hw)),d[this.r.schoose(this.f.componentChances)](this,e),this.totaldone++,!1}}function x(t){return new r(t)}function M(t,e,h){const s=new u(t,e,h);return function(t){var e=!1;do{e=t.addcomponent()}while(!e);t.cfx.clearRect(t.hw+t.w%2,0,t.w,t.h),t.cfx.scale(-1,1),t.cfx.drawImage(t.cf,0-t.w,0)}(s),s}function m(t){const e=t.getContext("2d");let h=t.width,s=t.height;const i=e.getImageData(0,0,h,s),o=function(t,e,h){for(let s=0;s<h;s++)for(let h=0;h<e;h++){const i=4*(s*e+h);if(t.data[i+3]>0)return s}return-1}(i,h,s),r=function(t,e,h){for(let s=h-1;s>=0;s--)for(let h=0;h<e;h++){const i=4*(s*e+h);if(t.data[i+3]>0)return s}return-1}(i,h,s),a=function(t,e,h){for(let s=0;s<e;s++)for(let i=0;i<h;i++){const h=4*(i*e+s);if(t.data[h+3]>0)return s}return-1}(i,h,s),n=function(t,e,h){for(let s=e-1;s>=0;s--)for(let i=0;i<h;i++){const h=4*(i*e+s);if(t.data[h+3]>0)return s}return-1}(i,h,s);if(o<0)return t.width=0,t.height=0,[0,0];h=1+n-a,s=1+r-o;const l=e.getImageData(a,o,h,s);return t.width=h,t.height=s,e.putImageData(l,0,0),[a,o]}function p(t,e){return Math.sqrt(t*t+e*e)}function w(t){const e=function(t,e,h,s){const i=Math.floor(t/h),o=Math.floor(e/h),r=[],a=Math.floor(e/(2*o));for(let h=0;h<o;h++){const n=h%2==0?i:i-1,l=h%2==0?Math.floor(t/(2*i)):Math.floor(t/i);for(let c=0;c<n;c++)r.push([l+Math.round((c+2*(Math.random()-.5)*s)*t/i),a+Math.round((h+2*(Math.random()-.5)*s)*e/o)])}return r}(t.width,t.height,Math.max(12,Math.floor(Math.min(t.width,t.height)/12)),.5),h=t.getContext("2d"),s=t.width,i=t.height,o=h.getImageData(0,0,s,i),r=[];e.forEach((()=>{r.push({minX:-1,minY:-1,maxX:-1,maxY:-1,points:[]})}));for(let t=0;t<i;t++)for(let h=0;h<s;h++){const i=4*(t*s+h);if(0===o.data[i+3])continue;let a=p(e[0][0]-h,e[0][1]-t),n=0;for(let s=1;s<e.length;s++){const i=p(e[s][0]-h,e[s][1]-t);i<a&&(a=i,n=s)}const l=r[n];l.minX<0?(l.minX=h,l.minY=t,l.maxX=h,l.maxY=t):(h<l.minX&&(l.minX=h),h>l.maxX&&(l.maxX=h),t<l.minY&&(l.minY=t),t>l.maxY&&(l.maxY=t)),l.points.push([h,t,o.data[i],o.data[i+1],o.data[i+2],o.data[i+3]])}const a=[];for(let t=0;t<r.length;t++){const h=r[t];if(h.minX>-1){const s=h.maxX-h.minX+1,i=h.maxY-h.minY+1,o=document.createElement("canvas");o.width=s,o.height=i;const r=o.getContext("2d"),n=r.getImageData(0,0,o.width,o.height);h.points.forEach((t=>{const e=4*((t[1]-h.minY)*s+(t[0]-h.minX));n.data[e]=t[2],n.data[e+1]=t[3],n.data[e+2]=t[4],n.data[e+3]=t[5]})),r.putImageData(n,0,0);const l={center:e[t],canvas:o,corner:[h.minX,h.minY]};a.push(l)}}return a}function y(t,e,h){const s=1.5+1.5*Math.random(),i=t.center[0]-e/2,o=t.center[1]-h/2,r=Math.sqrt(i*i+o*o),a=r*r,n=r*s;t.translateX=(n-r)*Math.sqrt((a-o*o)/a)*(i>0?1:-1),t.translateY=(n-r)*Math.sqrt((a-i*i)/a)*(o>0?1:-1),t.angle=(360*Math.random()*2-360)/((Math.random()+2)*t.canvas.width)*10*(Math.PI/180)}function b(t){const e=document.createElement("canvas"),{width:h,height:s}=t;e.width=h,e.height=s;const i=t.getContext("2d"),o=e.getContext("2d"),r=i.getImageData(0,0,h,s),{data:a}=r,{length:n}=a;for(let t=0;t<n;t+=4){const e=a[t+0],h=a[t+1],s=a[t+2];a[t+0]=255-(.393*e+.769*h+.189*s),a[t+1]=255-(.349*e+.686*h+.168*s),a[t+2]=255-(.272*e+.534*h+.131*s)}return o.putImageData(r,0,0),e}function C(t){const e=document.createElement("canvas");e.width=Math.floor(2*Q),e.height=Math.floor(2*j);const h=e.getContext("2d"),s=e.width/2-15,i=e.height/2-30;h.setTransform(1.5,0,0,j/Q*1.5,0,0);const o=h.createRadialGradient(s,i,10,s,i,30-3*t);return o.addColorStop(0,"transparent"),o.addColorStop(.7,"blue"),o.addColorStop(1,"cyan"),h.fillStyle=o,h.beginPath(),h.arc(s,i,Q/2,0,7),h.fill(),m(e),e}function S(t){const e=document.createElement("canvas");e.width=20,e.height=20;const h=e.getContext("2d");var s=h.createRadialGradient(10,10,0,10,10,10);return s.addColorStop(t,"yellow"),s.addColorStop(1,"red"),h.fillStyle=s,h.beginPath(),h.arc(10,10,10,0,7),h.fill(),e}function v(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const h=e.getContext("2d");return h.scale(1,-1),h.drawImage(t,0,0,t.width,-t.height),e}const T=480,I=700,B=Math.floor(240),A=Math.floor(350),P=540;let D,R,k=!1,q=!1,H=-1,E=-1,X=-1,Y=-1,G=-1,F=-1,L=-1,O=-1,z={},K=!1,N=document.getElementById("a");const U=M(x("piBbgDn4CZqlkqiF"),"ie7jMyCFouoUjkVs",60).cf;m(U);const W=w(U),Q=U.width,j=U.height,Z=U.getContext("2d").getImageData(0,0,Q,j).data;let J,V,_,$=[D,R,Q,j,Z];const tt=1e3;let et,ht;!function(t){const e=document.createElement("canvas");e.width=32,e.height=32;const h=e.getContext("2d");let s,i;t.width>t.height?(s=32,i=32*t.height/t.width):(i=32,s=32*t.width/t.height),h.drawImage(t,0,0,s,i);const o=document.createElement("link");o.setAttribute("rel","icon"),o.setAttribute("href",e.toDataURL()),document.head.appendChild(o)}(U);const st=function(){const t=[];for(let e=0;e<5;e++)t.push(C(e));return t}(),it=[],[ot,rt]=function(){const t=document.createElement("canvas");t.width=20,t.height=60;const e=t.getContext("2d");return e.fillStyle="yellow",e.beginPath(),e.moveTo(10,60),e.lineTo(20,10),e.arc(10,10,10,0,Math.PI,!0),e.lineTo(10,60),e.fill(),e.strokeStyle="cyan",e.shadowColor="blue",e.globalCompositeOperation="source-atop",e.shadowBlur=4,e.lineWidth=10,e.beginPath(),e.moveTo(10,70),e.lineTo(23,10),e.arc(10,10,13,0,Math.PI,!0),e.lineTo(10,70),e.stroke(),[t,e.getImageData(0,0,t.width,t.height).data]}(),at=function(){const t=[];for(let e=0;e<9;e++)t.push(S(e/10));for(let e=t.length-2;e>=1;e--)t.push(t[e]);return t}(),nt=at[0].getContext("2d").getImageData(0,0,at[0].width,at[0].height).data,[lt,ct]=function(){const t=document.createElement("canvas");t.width=60,t.height=60;const e=t.getContext("2d");var h=e.createRadialGradient(30,30,0,30,30,30);return h.addColorStop(.6,"navy"),h.addColorStop(1,"blue"),e.fillStyle=h,e.beginPath(),e.arc(30,30,30,0,7),e.fill(),[t,e.getImageData(0,0,t.width,t.height).data]}();let ft=performance.now();let dt,gt,ut,xt=0;const Mt=JSON.parse(localStorage.pnf_highscores||"false")||[];let mt=-1;const pt=function(){const t=document.createElement("canvas");t.width=100,t.height=100;const e=t.getContext("2d");e.font="bold 20px Helvetica",e.translate(50,50),e.rotate(-Math.PI/2),e.fillStyle="red",e.fillStyle="#fff",e.textAlign="center",e.textBaseline="middle",e.fillText("NEW!",0,0),m(t);const h=document.createElement("canvas");h.width=t.width+10,h.height=t.height+10;const s=h.getContext("2d");return s.fillStyle="red",s.fillRect(0,0,h.width,h.height),s.drawImage(t,5,5),h}();function wt(t){gt+=t,ut=(new Intl.NumberFormat).format(gt)}function yt(){const t=Math.max(400,1e3-25*dt);zt+=Lt.si(t,t+400)}let bt,Ct,St,vt;function Tt(t){const e=t[0];m(e);const h=e.getContext("2d").getImageData(0,0,e.width,e.height).data,s=b(e),i=w(e);t[1]=h,t[2]=s,t[3]=i}const It=[["c4pf4K5xHzu4CyZM","Wl9w64KNQvFNbbbU",50,10,.35,0,[]],["VTjHVRDIYTbXk766","a3QM5c7MnbQlWns3",80,30,.27,0,[]],["1fOXvyryYCvwBWPL","I4xttvPYWxB1So2A",230,80,.2,6,[]],["VsM4qdcBSiuCPDGJ","q4D72OvJMb23kSZC",60,20,.4,0,[]],["l4pyu8yF0mt84Q4u","jPU5GcKNpf2JMgoG",100,40,.35,0,[[A]]],["NMp3mtsPHIwzMKYk","dBzvSKo7wpema3S5",220,90,.22,9,[]],["o67yOby6izpasGgo","fyKKupDEId96qQHu",70,20,.5,0,[[A]]],["IU7xqL8UqZIXJQDQ","aVBO8buAfBbQ4DOY",100,40,.35,0,[[A,6]]],["LP6kUeGMn7S5xZzi","p5O7jAQK67mDULTD",230,100,.25,14,[]],["SsSvCKpjLVTGITYH","aOEjI2Owpqpl06ex",65,30,.5,0,[[A]]],["AGUwhB1E94wgKe49","pwUtokX7oS7ZKFK1",110,50,.35,6,[[A,6]]],["qRF6GA3xnzX0lMcH","RIdNudvB6T2ro7C3",240,120,.3,22,[]]];function Bt(e){switch(xt){case 0:case 1:!function(e){const h=N.getContext("2d");h.fillStyle="#000",h.fillRect(0,0,T,I),h.fillStyle="#fff";let s=(e-ft)/3e3;h.save();for(let t=800;t--;){let e=200/(4-(s+t/13)%4);h.globalAlpha=Math.min(e/400,1),h.beginPath(),h.arc(Math.cos(t)*e+B,Math.sin(t*t)*e+A,e/800,0,7),h.fill()}if(h.restore(),h.textBaseline="middle",h.textAlign="center",1===xt){if(0===Mt.length)h.font="bold 40px Helvetica",h.fillText("PLANET NOT FOUND",B,A);else{h.font="bold 30px Helvetica",h.fillText("HIGH SCORES",B,100),h.save(),h.textAlign="start",h.textBaseline="top";for(let t=0;t<Mt.length;t++){t===mt?(h.save(),h.translate(90,185+80*t),h.drawImage(pt,-Math.floor(pt.width/2),-Math.floor(pt.height/2)),h.restore(),h.fillStyle="gold"):h.fillStyle="#fff";const e=Intl.NumberFormat().format(Mt[t][0]),s=new Date(Mt[t][1]).toLocaleString();h.font="50px Helvetica",h.fillText(String(t+1),115,160+80*t),h.font="60px Helvetica",h.fillText("{",145,150+80*t),h.font="25px Helvetica",h.fillText(e+" points",170,160+80*t),h.font="15px Helvetica",h.fillText(s,170,190+80*t)}h.restore()}h.font="20px Helvetica",h.fillText("<Press anywhere or any key to play>",B,670),k||K?q||(xt=2,dt=0,Lt=new t("enemy"),Ot=new t("powerup"),zt=1e3,Kt=5e3,Nt=jt,Ut=0,Ft=0,Yt=[],Gt=[],ft=performance.now(),Zt=performance.now(),gt=0,wt(0),J=!1,D=B,R=Math.floor(630),_=0,et=0,ht=1,Wt=!1,mt=-1):q=!1}else if(h.font="italic 30px Helvetica",h.fillText("Loadingâ€¦",B,A),bt)if(it.length<It.length)it.push(function(t,e,h,...s){return[v(M(x(t),e,h).cf),void 0,void 0,void 0,...s]}(...It[it.length]));else{let t=!0;for(let e=0;t&&e<it.length;e++)it[e][1]||(t=!1,Tt(it[e]));t&&(xt=1)}else bt=v(M(x("HYj7ADLjQr6icLtO"),"CdiB9N2ZoQWuAxur",270).cf),m(bt),St=b(bt),vt=w(bt),Ct=bt.getContext("2d").getImageData(0,0,bt.width,bt.height).data}(e);break;case 2:!function(t){const e=t-Zt;if(Zt=t,e>160)return ft+=e,void(z=[]);if(!J){const t=.6*e,h=z.ArrowUp||z.KeyW,s=z.ArrowDown||z.KeyS,i=z.ArrowLeft||z.KeyA,o=z.ArrowRight||z.KeyD;if(h||s||i||o){const e=(h||s)&&(i||o)?Math.sqrt(t**2/2):t;h&&(R-=e),s&&(R+=e),i&&(D-=e),o&&(D+=e),L=D,O=R}else{let e=L-D,h=O-R;const s=Math.sqrt(e**2+h**2);s<t?(D=L,R=O):(D+=e/s*t,R+=h/s*t)}D-Math.floor(Q/2)<0?D=Math.floor(Q/2):D+Math.floor(Q/2)>T&&(D=T-Math.floor(Q/2)),R-Math.floor(j/2)<0?R=Math.floor(j/2):R+Math.floor(j/2)>I&&(R=I-Math.floor(j/2)),$=[D,R,Q,j,Z]}const h=N.getContext("2d");let s;h.fillStyle="#000",h.fillRect(0,0,T,I),h.fillStyle="#777";for(let e=100;e--;h.beginPath(),h.arc(Math.floor(-60*(100-e)*(D-Q/2)/(100*(T-Q)))+102797*Math.floor(270)*(1+Math.sin(s*P))%P,I*(Math.tan(e/9)+s*(t-ft)/3e3)%I,2*s,0,7),h.fill())s=149/(3*e+199);const i=J,o=[],r=[],a=[];function n(e){const s=e.run(Gt,h,t-ft);"boolean"==typeof s?s&&(e.alwaysOnTop?r.push(e):o.push(e),e.hit&&a.push(e)):Array.isArray(s)&&s.forEach((t=>{e===t?s&&(e.alwaysOnTop?r.push(e):o.push(e),e.hit&&a.push(e)):n(t)}))}Yt.forEach(n),!i&&J&&(V=t-ft,W.map((e=>(y(e,Q,j),new kt(e,D-Math.floor(Q/2),R-Math.floor(j/2),1500,t-ft)))).forEach(n));if(Yt=o.concat(r),Gt=a,h.fillStyle="#fff",h.textAlign="center",J)h.save(),h.globalAlpha=Math.min(1,(t-ft-V)/2e3),h.textBaseline="middle",h.font="40px Helvetica",h.fillText("Game Over",B,A),h.restore();else{if(ht){const t=st[Math.min(ht-1,st.length-1)];h.drawImage(t,D-Math.floor(t.width/2),R-Math.floor(t.height/2)+5)}h.drawImage(U,D-Math.floor(Q/2),R-Math.floor(j/2))}et>t-ft&&(h.save(),h.globalAlpha=(et-t+ft)/tt,h.fillStyle="#fff",h.fillRect(0,0,T,I),h.restore());h.textBaseline="top",h.font="16px Helvetica",h.fillText(ut,B,5);const l=_>t-ft;!J&&Ft+(l?100:200)<t-ft&&(Qt=-Qt,Yt.push(new Rt(D+(l?Qt:0),R-Math.floor(j/2),t-ft)),Ft=Math.max(t-ft));Kt<t-ft&&!Wt&&(dt++,dt%5?Kt=t-ft+1e4:(Wt=!0,Yt.push(new Xt(Math.floor(dt/5),t-ft))));Nt<t-ft&&!Wt&&(Yt.push(new Dt(Ot.si(30,450),Math.floor(-lt.height/2),Ut,t-ft)),Ut=(Ut+1)%Pt.length,Nt=t-ft+jt);if(zt<t-ft&&!Wt){const e=Lt.si(Math.min(Math.max(dt-2,0),it.length-3),Math.min(dt,it.length-1)),[h,s,i,o,r,a,n,l]=it[e];Yt.push(new Et(h,s,i,o,Lt.si(30,450),Math.floor(-h.height/2),a,r,50*(e+1),n,l,t-ft)),yt()}J&&V+3500<t-ft&&(!function(){if(gt){const t=[gt,Date.now()];Mt.push(t),Mt.sort(((t,e)=>{const h=e[0]-t[0];return 0===h?e[1]-t[1]:h})),Mt.length=Math.min(Mt.length,5),mt=Mt.indexOf(t),localStorage.pnf_highscores=JSON.stringify(Mt)}}(),xt=1,q=k)}(e)}K=!1}function At(t,e){const h=t[0]-t[2]/2<e[0]-e[2]/2?[t,e]:[e,t],s=t[1]-t[3]/2<e[1]-e[3]/2?[t,e]:[e,t];if(h[0][0]+h[0][2]/2>h[1][0]-h[1][2]/2&&s[0][1]+s[0][3]/2>s[1][1]-s[1][3]/2){const i=Math.floor(h[1][0]-h[1][2]/2),o=Math.floor(s[1][1]-s[1][3]/2),r=Math.floor(Math.min(h[0][0]+h[0][2]/2,h[1][0]+h[1][2]/2))-i,a=Math.floor(Math.min(s[0][1]+s[0][3]/2,s[1][1]+s[1][3]/2))-o,n=i-Math.floor(t[0]-t[2]/2),l=o-Math.floor(t[1]-t[3]/2),c=i-Math.floor(e[0]-e[2]/2),f=o-Math.floor(e[1]-e[3]/2);for(let h=0;h<a;h++)for(let s=0;s<r;s++)if(t[4][4*((l+h)*t[2]+n+s)+3]>0&&e[4][4*((f+h)*e[2]+c+s)+3]>0)return!0}return!1}const Pt=[["F","orange",t=>{_=t+6500}],["S","cyan",()=>{ht++}],["B","red",t=>{et=t+tt,zt+=1500}]];class Dt{constructor(t,e,h,s){this.x=t,this.y=e,this.type=h,this.lastTime=s,this.frame=0,this.alwaysOnTop=!0}run(t,e,h){this.y+=5*(h-this.lastTime)/32,this.frame=(this.frame+1)%50;const s=[this.x,this.y,lt.width,lt.height,ct];if(!J&&At($,s))return Pt[this.type][2](h),!1;if(this.y-Math.floor(lt.height/2)>I)return!1;this.lastTime=h,e.save(),e.translate(this.x,this.y),e.drawImage(lt,-Math.floor(lt.width/2),-Math.floor(lt.height/2)),e.textAlign="center",e.textBaseline="top";let i=65;this.frame<25?i+=this.frame:i+=50-this.frame,e.font="700 "+Math.floor(i/2)+"px Helvetica";const o=e.measureText(Pt[this.type][0]),r=o.actualBoundingBoxDescent-o.actualBoundingBoxAscent;return e.fillStyle=Pt[this.type][1],e.fillText(Pt[this.type][0],0,-Math.floor(r/2)),e.restore(),!0}}class Rt{constructor(t,e,h){this.x=t,this.y=e,this.lastTime=h,this.power=10}run(t,e,h){this.y-=20*(h-this.lastTime)/32;const s=[this.x,this.y,ot.width,ot.height,rt];for(let e=0;e<t.length;e++){const i=t[e];if(At(s,i.hitBox))return i.hit(this.power,h),!1}return!(this.y+Math.floor(ot.height/2)<0)&&(this.lastTime=h,e.drawImage(ot,this.x-Math.floor(ot.width/2),this.y-Math.floor(ot.height/2)),!0)}}class kt{constructor(t,e,h,s,i){this.time=i,this.center=t.center,this.canvas=t.canvas,this.corner=t.corner,this.translateX=t.translateX,this.translateY=t.translateY,this.angle=t.angle,this.shipX=e,this.shipY=h,this.duration=s}run(t,e,h){const s=h-this.time;if(s>this.duration)return!1;const i=this.shipX+this.center[0]+this.translateX*Math.min(s,this.duration)/this.duration,o=this.shipY+this.center[1]+this.translateY*Math.min(s,this.duration)/this.duration;e.save(),e.globalAlpha=1-(Math.min(s,this.duration)/this.duration)**2,e.translate(i,o),e.rotate(this.angle*Math.min(s,this.duration)/this.duration);const r=this.corner[0]-this.center[0],a=this.corner[1]-this.center[1];return e.drawImage(this.canvas,r,a),e.restore(),!0}}class qt{constructor(t,e,h,s,i,o){this.width=at[0].width,this.height=at[0].height,this.x=t,this.y=e;const r=Math.sqrt((h-t)**2+(s-e)**2);this.xFactor=(h-t)/r,this.yFactor=(s-e)/r,this.lastTime=o,this.speed=i,this.frame=0,this.alwaysOnTop=!0,this.updateHitBox()}run(t,e,h){if(et>h)return!1;const s=h-this.lastTime;if(this.y+=s*this.speed*this.yFactor,this.x+=s*this.speed*this.xFactor,this.updateHitBox(),At($,this.hitBox)){if(ht)return ht--,!1;J=!0}return!(this.y-Math.floor(this.height/2)>I||this.y+Math.floor(this.height/2)<0||this.x-Math.floor(this.width/2)>T||this.x+Math.floor(this.width/2)<0)&&(this.lastTime=h,this.frame=(this.frame+1)%at.length,e.drawImage(at[this.frame],this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height),!0)}updateHitBox(){this.hitBox=[this.x,this.y,this.width,this.height,nt]}}function Ht(t,e,h,s,i,o){const r=[];for(let a=0;a<t;a++){const n=s+2*a*Math.PI/t;r.push(new qt(e,h,e+Math.round(100*Math.cos(n)),h+Math.round(100*Math.sin(n)),i,o))}return r}class Et{constructor(t,e,h,s,i,o,r,a,n,l,c,f){this.fireAngle=Lt.sd(0,2*Math.PI),this.canvas=t,this.mask=e,this.hitCanvas=h,this.width=t.width,this.height=t.height,this.health=a,this.x=i,this.y=o,this.lastTime=f,this.hitTime=0,this.destroyedSprites=s,this.speed=r,this.points=n,this.deathBullets=l,this.fireSequences=c,this.updateHitBox()}run(t,e,h){const s=this.y;let i=!1;if(this.health<=0||et>h)i=!0;else{const t=h-this.lastTime;this.y+=t*this.speed,this.updateHitBox(),At($,this.hitBox)&&(ht?(ht--,i=!0):J=!0)}if(i){wt(this.points);return(this.deathBullets>0?Ht(this.deathBullets,this.x,this.y+Math.round(17*this.speed),this.fireAngle,.45,h):[]).concat(this.destroyedSprites.map((t=>(y(t,this.width,this.height),new kt(t,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),500,h)))))}if(this.y-Math.floor(this.height/2)>I)return!1;this.lastTime=h;const o=h-this.hitTime;let r=0;if(o<400&&(r=(400-o)/400),e.save(),e.drawImage(this.canvas,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height),r>0&&(e.globalAlpha=r,e.drawImage(this.hitCanvas,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height)),e.restore(),!J)for(let t=0;t<this.fireSequences.length;t++){const e=this.fireSequences[t][0];if(s<e&&this.y>e){const e=this.fireSequences[t][1],s=this.y+Math.round(17*this.speed);return e?[this,...Ht(e,this.x,s,this.fireAngle,.3,h)]:[this,new qt(this.x,s,D,R,.3,h)]}}return!0}updateHitBox(){this.hitBox=[this.x,this.y,this.width,this.height,this.mask]}hit(t,e){this.hitTime=e,this.health-=t}}class Xt{constructor(t,e){this.state=0,this.nextState=e+2e3,this.health=Number.MAX_SAFE_INTEGER,this.lastTime=e,this.width=bt.width,this.height=bt.height,this.x=B,this.y=-this.height/2,this.direction=0,this.hitTime=0,this.level=t,this.updateHitBox()}run(t,e,h){this.y;let s=!1;if(this.health<=0)s=!0;else{const t=h-this.lastTime;0===this.state?h>this.nextState&&(this.state=1):1===this.state?(this.y+=.15*t,this.y>150&&(this.y=150,this.health=100+250*this.level,this.state=2,this.nextBullet=h,this.bulletCount=0)):0===this.direction?(this.x+=.1*t,this.x+Math.floor(this.width/2)>T&&(this.x=T-Math.floor(this.width/2),this.direction=1)):(this.x-=.1*t,this.x-Math.floor(this.width/2)<0&&(this.x=Math.floor(this.width/2),this.direction=0)),this.updateHitBox(),At($,this.hitBox)&&(J=!0)}if(s)return wt(500*dt),Wt=!1,Kt=h+1e4,zt=500+h,yt(),Nt=500+h,vt.map((t=>(y(t,this.width,this.height),new kt(t,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),500,h))));this.lastTime=h;const i=h-this.hitTime;let o=0;if(i<400&&(o=(400-i)/400),e.save(),e.drawImage(bt,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height),o>0&&(e.globalAlpha=o,e.drawImage(St,this.x-Math.floor(this.width/2),this.y-Math.floor(this.height/2),this.width,this.height)),e.restore(),!J&&2===this.state&&this.nextBullet<h){const t=[];if(this.bulletCount<5*this.level){let e,s;switch(Math.floor(this.bulletCount/this.level)){case 0:e=28,s=119;break;case 1:e=42,s=123;break;case 2:e=108,s=94;break;case 3:e=121,s=80;break;default:e=143,s=50}t.push(new qt(this.x-e,this.y+s,this.x-e,this.y+s+100,.5,h)),t.push(new qt(this.x+e,this.y+s,this.x+e,this.y+s+100,.5,h))}else t.push(new qt(this.x,this.y+125,D,R,.3,h));return this.bulletCount++,this.bulletCount>=10*this.level?(this.bulletCount=0,this.nextBullet=h+800):this.bulletCount>5*this.level?this.nextBullet=h+200:this.bulletCount===5*this.level?this.nextBullet=h+800:this.bulletCount%this.level?this.nextBullet=h+180:this.nextBullet=h+500,[this,...t]}return!0}updateHitBox(){this.hitBox=[this.x,this.y,this.width,this.height,Ct]}hit(t,e){this.hitTime=e,this.health-=t}}let Yt,Gt,Ft,Lt,Ot,zt,Kt,Nt,Ut,Wt,Qt=5;const jt=9e3;let Zt;onload=t=>{N.width=T,N.height=I;N.getContext("2d");requestAnimationFrame((function t(e){Bt(e),requestAnimationFrame(t)}))};let Jt=t=>{let e,h,s,i;N.offsetWidth/N.offsetHeight>.6857142857142857?(h=0,i=N.offsetHeight,s=i*T/I,e=Math.floor(N.offsetWidth-s)/2):(e=0,s=N.offsetWidth,i=s*I/T,h=Math.floor(N.offsetHeight-i)/2);let o={};return o=t.changedTouches?t.changedTouches[0]:t,[Math.floor((o.pageX-e)*T/s),Math.floor((o.pageY-h)*I/i)]};onclick=t=>{t.preventDefault(),[H,E]=Jt(t)},self.ontouchstart=self.onpointerdown=t=>{t.preventDefault(),k=!0,[X,Y]=Jt(t),L=X,O=Y},self.ontouchmove=self.onpointermove=t=>{t.preventDefault(),[L,O]=Jt(t)},self.ontouchend=self.onpointerup=t=>{t.preventDefault(),k=!1,[G,F]=Jt(t),t.changedTouches&&onclick()},onkeydown=t=>{K=!0,z[t.code]=1,t.preventDefault()},onkeyup=t=>{z[t.code]=0,t.preventDefault()}}();</script></body></html>